<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>Sudoku 2010-02</title>
    <meta name="author" content="Jürgen Dufner"/>
    <meta name="description" content="Sudoku"/>
    <meta name="keywords" content="Sudoku"/>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-15"/>
    <style type="text/css">
<!--
* {
  font-family: Verdana, Arial, Helvetica, sans-serif;
}
table#board.solved {
  border: #00ff00 solid 2px;
}
td.fixed {
  font-size: 15px;
  font-weight: bold;
  text-align: center;
  vertical-align: middle;
  border: #999999 solid 1px;
  width: 40px;
  min-width: 40px;
  max-width: 40px;
  height: 40px;
  min-height: 40px;
  max-height: 40px;
  margin: 0px;
  padding: 0px;
  cursor: default;
}
td.candidate {
  font-size: 9px;
  font-weight: normal; 
  text-align: center;
  vertical-align: middle;
  width: 13px;
  min-width: 13px;
  max-width: 13px;
  height: 13px;
  min-height: 13px;
  max-height: 13px;
  cursor: default;
}
td.block1, td.block3, td.block5, td.block7, td.block9 {
  background-color: #FFFFFF;
}
td.block2, td.block4, td.block6, td.block8 {
  background-color: #CCCCCC;
}
td.original {
  color: #0000ff;
}
td.conflict {
  border: #ff0000 solid 1px;
}
/* Kandidaten per Knopf hervorheben */
td.highlight1 {
  background-color: #ffff99; /* gelb */
}
/* Kandidaten onmouseover / onmouseout */
td.highlight2 {
  background-color: #ff9999; /* rot */
}
/* Fixed / Zellen */
td.highlight3 {
  background-color: #99ff99; /* gruen */
}
td.hide {
  visibility: hidden;
}
div.candidateButtonOff {
  margin: 2px;
  padding: 2px;
  border: 2px #999999 outset;
  background-color: #ffff99;
  cursor: default;
}
div.candidateButtonOn {
  margin: 2px;
  padding: 2px;
  border: 2px #999999 inset;
  background-color: #cccc99;
  cursor: default;
}
-->
    </style>
  </head>
  <body>
    <h1>Sudoku 2010-02</h1>
    <div id="sudoku" style="float:left"></div>
    <div style="float:left; margin-left:10px;">
      <fieldset>
        <legend>Statistik</legend>
        <p>Gesetzte Zellen: <input id="fixedCellNumber" style="float:right;" type="text" size="3" readonly="true" value=""/></p>
        <p>Verbleibende Kandidaten: <input id="candidateNumber" style="float:right;" type="text" size="3" readonly="true" value=""/></p>
      </fieldset>
    </div>
    <div id="candidateButtons" style="float:left; margin-left:10px;"></div>
    <div id="buttons" style="clear:both; margin-top:10px;">
      <select id="quests" name="quests" size="1"></select>
      <input type="button" value="Laden" onclick="copyAndLoadSudoku()"/><br/>
      <input id="sudokuAsString" type="text" value="" size="81"/>
      <input id="incloseCandidates" type="checkbox">inkl. Kandidaten</input><input type="button" value="Laden" onclick="loadSudoku()"/><input type="button" value="Speichern" onclick="saveSudoku()"/><br/>
      <input type="button" value="Kandidaten entfernen" onclick="removeAllCandidates()"/><input type="button" value="Reset" onclick="resetAllCandidates()"/><input type="button" value="Leeren" onclick="emptyCandidates()"/><input id="hideButton" type="button" value="Ausblenden" onclick="hideCandidates()"/><br/>
      <input type="button" value="Aus Cookie laden" onclick="loadSudokuFromCookie()"/><input type="button" value="In Cookie speichern" onclick="saveSudokuInCookie()"/><br/>
      <input id="undoButton" type="button" value="&lt;&lt; Zurück &lt;&lt;" onclick="undoCommand();"><input id="doButton" type="button" value="&gt;&gt; Vor &gt;&gt;" onclick="doCommand();"><br/>
      <fieldset>
        <legend>Spielhilfe (<span id="configHelp" style="cursor:default;" onclick="switchVisibility('configHelp');">+</span>)</legend>
        <div id="configHelpBlock" style="visibility:hidden; display:none;">
          <input id="showConflicts" type="checkbox" checked="true">Fehler zeigen (funktioniert noch nicht)</input><br/>
        </div>
      </fieldset>
      <fieldset>
        <legend>Zellen (<span id="configCellHighlight" style="cursor:default;" onclick="switchVisibility('configCellHighlight');">+</span>)</legend>
        <div id="configCellHighlightBlock" style="visibility:hidden; display:none;">
          <input id="highlightFixed" type="checkbox" checked="true">Zellen hervorheben</input><br/>
          <input id="highlightAllFixed" type="checkbox">Auch andere Zellen hervorheben</input><br/>
          <input id="highlightAllFixedAndCandidates" type="checkbox">Auch andere Kandidaten hervorheben</input><br/>
        </div>
      </fieldset>
      <fieldset>
        <legend>Kandidaten (<span id="configCandidateHighlight" style="cursor:default;" onclick="switchVisibility('configCandidateHighlight');">+</span>)</legend>
        <div id="configCandidateHighlightBlock" style="visibility:hidden; display:none;">
          <input id="highlightCandidates" type="checkbox" checked="true">Kandidaten hervorheben</input><br/>
          <input id="highlightAllCandidates" type="checkbox">Auch andere Kandidaten hervorheben</input><br/>
          <input id="highlightAllCandidatesAndFixed" type="checkbox">Auch andere Zellen hervorheben</input><br/>
        </div>
      </fieldset>
      Kandidaten und andere Kandidaten hervorheben: Nach setzen einer Zelle, werden die anderen Zellen nicht zurückgesetzt.
    </div>
  </body>
  <script language="javascript">
<!--
var size = 9;
var subSize = 3;
var original;
var doCmd = new Array();
var undoCmd = new Array();
var updateStatisticsId;
var sudokus = [new solution(48626, "45......3....7......1.24.6.....6..5........39.....2..4..9....1..625...9...4.137..", "457691283628375941931824567713469852246758139895132674379286415162547398584913726", "leicht", true, [
new step("SIMPLE", "45......3....7......1.24.6.....6..5........39.....2..4..9....1..625...9...4.137..", ["3RM123459","4RM23457","5RM1234567","6RM23457","7RM34567","8RM134569","10RM1457","11RM14567","12RM124579","13RM2457","15RM2347","16RM367","18RM34679","17RM135679","20RM12456","19RM12456","22RM124567","25RM123467","28RM456","27RM123469","30RM124569","29RM56","31RM256","36RM34569","33RM23456","34RM345679","39RM12349","40RM23569","37RM349","38RM3569","43RM34579","41RM123679","42RM23469","47RM2456","48RM1249","46RM24","52RM234579","50RM12467","49RM2456","56RM124569","55RM12469","53RM1234569","60RM123459","59RM1235679","58RM1359","64RM24569","63RM13479","61RM179","69RM1234569","70RM125679","72RM12345679","68RM1235679","80RM1345679","73RM1234679","74RM12345679","76RM13457","81RM13479"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8-9,8-9,1-6-8-9,1-2-8-9,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8-9,7,1-5-6-8-9,1-2-4-5-8-9,2-4-8,1-2-5-8,3-7-8-9,3-7-8-9,1,3-8-9,2,4,5-8-9,6,5-7-8,1-2-3-7-8-9,1-2-3-4-7-8-9,3-7-8,1-3-4-7-8-9,6,1-7-8-9,1-2-8,5,1-2-7-8,1-2-5-6-7-8,1-2-4-7-8,5-6-7-8,1-4-7-8,4-5-8,1-5-7-8,1-2-6-8,3,9,1-3-5-6-7-8-9,1-3-7-8-9,3-5-6-7-8,1-3-7-8-9,3-5-8-9,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2-4-6-7-8,4-8,6-7-8,2-3-4-5-6-8,1,2-5-6-8,1-3-7-8,6,2,5,4-8,7-8,3-4-8,9,8,5-8,8,4,2-6-8-9,1,3,7,2-8,2-5-6-8", ["50SV3","15SV5","76SV9","64SV1","17SV4"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8-9,8-9,1-6-8-9,1-2-8-9,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8-9,7,5,1-2-4-5-8-9,4,1-2-5-8,3-7-8-9,3-7-8-9,1,3-8-9,2,4,5-8-9,6,5-7-8,1-2-3-7-8-9,1-2-3-4-7-8-9,3-7-8,1-3-4-7-8-9,6,1-7-8-9,1-2-8,5,1-2-7-8,1-2-5-6-7-8,1-2-4-7-8,5-6-7-8,1-4-7-8,4-5-8,1-5-7-8,1-2-6-8,3,9,1-3-5-6-7-8-9,1-3-7-8-9,3-5-6-7-8,1-3-7-8-9,3,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2-4-6-7-8,4-8,6-7-8,2-3-4-5-6-8,1,2-5-6-8,1,6,2,5,4-8,7-8,3-4-8,9,8,5-8,8,4,9,1,3,7,2-8,2-5-6-8", ["4RM59","37RM14","42RM2345","47RM234","13RM59","48RM234","46RM1234","16RM34567","18RM457","49RM234569","22RM59","28RM14","31RM23569"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8,8-9,1-6-8-9,1-2-8-9,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5-8-9,6,5-7-8,2-3-7-8-9,1-2-3-4-7-8-9,3-7-8,1-4-7-8,6,1-7-8-9,1-2-8,5,1-2-7-8,2-5-6-7-8,1-2-4-7-8,5-6-7-8,1-4-7-8,4-5-8,1-7-8,1-2-6-8,3,9,5-6-7-8-9,1-7-8-9,5-6-7-8,1-7-8,3,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2-4-6-7-8,4-8,6-7-8,2-3-4-5-6-8,1,2-5-6-8,1,6,2,5,4-8,7-8,3-4-8,9,8,5-8,8,4,9,1,3,7,2-8,2-5-6-8", ["70SV3","5SV9","81SV6","41SV5","33SV9","58SV2","69SV7"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8,9,1-6-8-9,1-2-8-9,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5-8-9,6,5-7-8,2-3-7-8-9,1-2-3-4-7-8-9,3-7-8,1-4-7-8,6,9,1-2-8,5,1-2-7-8,2-5-6-7-8,1-2-4-7-8,5-6-7-8,1-4-7-8,5,1-7-8,1-2-6-8,3,9,5-6-7-8-9,1-7-8-9,5-6-7-8,1-7-8,3,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2,4-8,6-7-8,2-3-4-5-6-8,1,2-5-6-8,1,6,2,5,4-8,7,3,9,8,5-8,8,4,9,1,3,7,2-8,6", ["39RM359","6RM234579","7RM3459","37RM359","60RM1234579","28RM569","42RM234579","63RM1234679","29RM569","61RM123679"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8,9,1-6-8,1-2-8,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5-8-9,6,5-7-8,2-3-7-8,1-2-3-4-7-8,3-7-8,1-4-7-8,6,9,1-2-8,5,1-2-7-8,2-6-7-8,1-2-4-7-8,6-7-8,1-4-7-8,5,1-8,1-2-6-8,3,9,5-6-7-8-9,1-7-8-9,5-6-7-8,1-7-8,3,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2,4-8,6-8,4-5-8,1,5-8,1,6,2,5,4-8,7,3,9,8,5-8,8,4,9,1,3,7,2-8,6", ["73SV5","68SV4","61SV4","60SV6","48SV5","80SV2"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8,9,1-6-8,1-2-8,2-7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5-8-9,6,5-7-8,2-3-7-8,1-2-3-4-7-8,3-7-8,1-4-7-8,6,9,1-2-8,5,1-2-7-8,2-6-7-8,1-2-4-7-8,6-7-8,1-4-7-8,5,1-8,1-2-6-8,3,9,5-6-7-8-9,1-7-8-9,5,1-7-8,3,2,1-6-8,7-8,4,3-5-7-8,3-7-8,9,2,4-8,6,4,1,5-8,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["6RM2345679","55RM124569","8RM1234569","59RM12345679","46RM12345"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8,9,1-8,1-2-8,7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5-8-9,6,5-7-8,2-3-7-8,1-2-3-4-7-8,3-7-8,1-4-7-8,6,9,1-2-8,5,1-2-7-8,2-6-7-8,1-2-4-7-8,6-7-8,1-4-7-8,5,1-8,1-2-6-8,3,9,6-7-8-9,1-7-8-9,5,1-7-8,3,2,1-6-8,7-8,4,3-7-8,3-7-8,9,2,8,6,4,1,5-8,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["74SV8","7SV2","72SV8","63SV5","59SV8","25SV5"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8,9,1-8,2,7-8,3,2-3-6-8-9,2-3-8-9,3-6-8,1-3-6-8,7,5,1-2-8-9,4,1-2-8,3-7-8-9,3-7-8-9,1,3-8,2,4,5,6,5-7-8,2-3-7-8,1-2-3-4-7-8,3-7-8,1-4-7-8,6,9,1-2-8,5,1-2-7-8,2-6-7-8,1-2-4-7-8,6-7-8,1-4-7-8,5,1-8,1-2-6-8,3,9,6-7-8-9,1-7-8-9,5,1-7-8,3,2,1-6-8,7-8,4,3-7-8,3-7-8,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["36RM345689","34RM23457","38RM568","43RM23457","11RM568","47RM568","16RM234567","18RM2345689","20RM568","56RM1245689","55RM1245689","27RM12345689","29RM568"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8,9,1-8,2,7-8,3,2-3-6-8-9,2-3-9,3-6-8,1-3-6-8,7,5,1-8-9,4,1,3-7-8-9,3-7-9,1,3-8,2,4,5,6,7,2-3-7-8,1-2-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,1-2-7,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,1-8,1-6-8,3,9,6-7-8-9,1-7-9,5,1-7-8,3,2,1-6-8,7-8,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["16SV9","36SV2"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8,9,1-8,2,7-8,3,2-3-6-8-9,2-3-9,3-6-8,1-3-6-8,7,5,9,4,1,3-7-8-9,3-7-9,1,3-8,2,4,5,6,7,2-3-7-8,1-2-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,2,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,1-8,1-6-8,3,9,6-7-8-9,1-7-9,5,1-7-8,3,2,1-6-8,7-8,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["10RM4579","11RM4579","28RM2569","29RM2569"])
,new step("HIDDEN_SINGLE", "4,5,6-7-8,1-6-8,9,1-8,2,7-8,3,2-3-6-8,2-3,3-6-8,1-3-6-8,7,5,9,4,1,3-7-8-9,3-7-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,2,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,1-8,1-6-8,3,9,6-7-8-9,1-7-9,5,1-7-8,3,2,1-6-8,7-8,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["8SV8","18SV1","53SV7","27SV7"])
,new step("SIMPLE", "4,5,6-7-8,1-6-8,9,1-8,2,8,3,2-3-6-8,2-3,3-6-8,1-3-6-8,7,5,9,4,1,3-7-8-9,3-7-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,2,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,1-8,1-6-8,3,9,6-7-8-9,1-7-9,5,1-7-8,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["3RM234589","20RM124567","19RM124567","49RM23457","4RM234589","6RM234589","13RM14579","47RM23457","46RM23457"])
,new step("HIDDEN_SINGLE", "4,5,6-7,1-6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-6-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,2,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,1-8,1-6-8,3,9,6-8-9,1-9,5,1-8,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["3SV7","42SV8"])
,new step("SIMPLE", "4,5,7,1-6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-6-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-7-8,1-4-7-8,6,9,1-8,5,2,2-6-7-8,1-2-4-7,6-7-8,1-4-7-8,5,8,1-6-8,3,9,6-8-9,1-9,5,1-8,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["49RM235689","39RM12345789","40RM235689","37RM3589","43RM3589","30RM124579","31RM235689"])
,new step("HIDDEN_SINGLE", "4,5,7,1-6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-6-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,1-8,5,2,2-6-7,1-2-4-7,6,1-4-7,5,8,1-6,3,9,6-8-9,1-9,5,1,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["4SV6","6SV1"])
,new step("SIMPLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-6-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,1-8,5,2,2-6-7,1-2-4-7,6,1-4-7,5,8,1-6,3,9,6-8-9,1-9,5,1,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["13RM1245679"])
,new step("NAKED_PAIR", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,1-8,5,2,2-6-7,1-2-4-7,6,1-4-7,5,8,1-6,3,9,6-8-9,1-9,5,1,3,2,1-6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["52RM19","40RM16","37RM16","38RM16","46RM19"])
,new step("HIDDEN_SINGLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-8,7,5,9,4,1,3-8-9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,1-8,5,2,2-7,2-4-7,6,4-7,5,8,1-6,3,9,6-8,1-9,5,1,3,2,6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["19SV9","47SV9","43SV1"])
,new step("SIMPLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-8,7,5,9,4,1,9,3-9,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,1-8,5,2,2-7,2-4-7,6,4-7,5,8,1,3,9,6-8,9,5,1,3,2,6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["20RM12456789","34RM1234579"])
,new step("HIDDEN_SINGLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-8,7,5,9,4,1,9,3,1,3-8,2,4,5,6,7,3-7-8,1-3-4-7,3-8,1-4-7,6,9,8,5,2,2-7,2-4-7,6,4-7,5,8,1,3,9,6-8,9,5,1,3,2,6-8,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["49SV1","52SV6","29SV1","39SV6","22SV8"])
,new step("SIMPLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-6-8,3-8,7,5,9,4,1,9,3,1,8,2,4,5,6,7,3-7-8,1,3-8,1-4-7,6,9,8,5,2,2-7,2-4-7,6,4-7,5,8,1,3,9,6-8,9,5,1,3,2,6,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["12RM1245679","13RM12456789","46RM12345679","31RM1235689"])
,new step("HIDDEN_SINGLE", "4,5,7,6,9,1,2,8,3,2-3-6-8,2-3,3-8,3,7,5,9,4,1,9,3,1,8,2,4,5,6,7,3-7-8,1,3-8,4-7,6,9,8,5,2,2-7,2-4-7,6,4-7,5,8,1,3,9,8,9,5,1,3,2,6,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["46SV8","31SV4","34SV8","38SV4","13SV3","10SV6","20SV3"])
,new step("SIMPLE", "4,5,7,6,9,1,2,8,3,6,2-3,3-8,3,7,5,9,4,1,9,3,1,8,2,4,5,6,7,3-7-8,1,3-8,4,6,9,8,5,2,2-7,4,6,4-7,5,8,1,3,9,8,9,5,1,3,2,6,7,4,3-7,3-7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["56RM1345689","40RM12345689","11RM13456789","28RM1245689","12RM1345679","30RM1245689"])
,new step("HIDDEN_SINGLE", "4,5,7,6,9,1,2,8,3,6,2,8,3,7,5,9,4,1,9,3,1,8,2,4,5,6,7,3-7,1,3,4,6,9,8,5,2,2-7,4,6,7,5,8,1,3,9,8,9,5,1,3,2,6,7,4,3-7,7,9,2,8,6,4,1,5,1,6,2,5,4,7,3,9,8,5,8,4,9,1,3,7,2,6", ["55SV3","12SV8","30SV3","11SV2","56SV7","28SV7","40SV7","37SV2"])
])
,new solution(49985, "68..7........54......1...5........1..7.......1.8.3.62.93.6..7...6498........1.5..", "685372491319854276742196853296548317473261985158739624931625748564987132827413569", "leicht", true, [
new step("SIMPLE", "68..7........54......1...5........1..7.......1.8.3.62.93.6..7...6498........1.5..", ["3RM4678","4RM1456789","6RM145678","7RM5678","8RM125678","9RM5678","10RM145689","11RM345678","12RM4568","13RM145679","16RM4567","18RM45","17RM1245","20RM135678","19RM15689","21RM14568","24RM1457","23RM134578","25RM1567","28RM16789","27RM15","30RM1478","29RM13678","32RM13578","31RM1369","36RM126","33RM134","34RM12567","39RM1478","40RM13679","37RM16789","43RM12567","44RM12567","41RM13578","42RM347","47RM123678","45RM1267","51RM123468","49RM123689","54RM12368","60RM1346789","59RM1356789","57RM346789","64RM134689","63RM35679","62RM1235679","69RM14689","70RM456789","71RM12456789","72RM456789","78RM145689","80RM1257","73RM134569","74RM13456789","75RM1345689","76RM15689","81RM157"])
,new step("HIDDEN_SINGLE", "6,8,1-2-3-5-9,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3-7,1-2-9,1-2-3-7-9,2-3-8,5,4,1-2-3-8-9,3-6-7-8-9,1-2-3-6-7-8-9,2-3-4-7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-6-7-8-9,2-3-4-5,2-4-5-9,2-3-5-6-9,2-4-5-7-8,2-4-6-9,2-5-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4-5,7,2-3-5-6-9,2-4-5-8,2-4-6-9,1-2-5-6-8-9,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,5-7-9,6,2,4-5-7-9,9,3,1-2-5,6,2-4,2-5,7,4-8,1-2-4-8,2-5-7,6,4,9,8,2-3-5-7,1-2-3,3,1-2-3,2-7-8,2,2-7,2-3-4-7,1,2-3-7,5,3-4-6-8-9,2-3-4-6-8-9", ["11SV1","57SV1","73SV8","42SV1","3SV5","17SV7"])
,new step("SIMPLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3-7,1,1-2-3-7-9,2-3-8,5,4,1-2-3-8-9,7,1-2-3-6-7-8-9,2-3-4-7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-6-7-8-9,2-3-4-5,2-4-5-9,2-3-5-6-9,2-4-5-7-8,2-4-6-9,2-5-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4-5,7,2-3-5-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,5-7-9,6,2,4-5-7-9,9,3,1,6,2-4,2-5,7,4-8,1-2-4-8,2-5-7,6,4,9,8,2-3-5-7,1-2-3,3,1-2-3,8,2,2-7,2-3-4-7,1,2-3-7,5,3-4-6-8-9,2-3-4-6-8-9", ["18RM1457","39RM1458","81RM158","10RM1457","27RM57","12RM145678","80RM158","30RM1458","63RM13679","16RM1457"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,2-3-6-8-9,2-3-4-7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-6-8-9,2-3-4-5,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-5-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4-5,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,5-7-9,6,2,4-5-7-9,9,3,1,6,2-4,2-5,7,4-8,2-4-8,2-5-7,6,4,9,8,2-3-5-7,1-2-3,3,1-2-3,8,2,2-7,2-3-4-7,1,2-3-7,5,3-4-6-9,2-3-4-6-9", ["64SV5","60SV5","18SV6","80SV6"])
,new step("SIMPLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,2-3-4-7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-6-8-9,2-3-4-5,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-5-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4-5,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,5-7-9,6,2,4-5-7-9,9,3,1,6,2-4,5,7,4-8,2-4-8,5,6,4,9,8,2-3-5-7,1-2-3,3,1-2-3,8,2,2-7,2-3-4-7,1,2-3-7,5,6,2-3-4-6-9", ["69RM145689","51RM145","33RM145","81RM15678","37RM15689","28RM15689","27RM567"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,2-3-4-7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-8-9,2-3-4,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,7-9,6,2,4-5-7-9,9,3,1,6,2-4,5,7,4-8,2-4-8,5,6,4,9,8,2-3-7,1-2-3,3,1-2-3,8,2,2-7,2-3-4-7,1,2-3-7,5,6,2-3-4-9", ["19SV7","81SV9","69SV7","75SV7"])
,new step("SIMPLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4-9,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,2-4-9,2-3-7-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-8-9,2-3-4,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-6-7-8-9,3-4-8-9,1,3-4-5-7-8-9,2-3-4,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8-9,1,4-5-9,8,4-5-7,3,7-9,6,2,4-5-7-9,9,3,1,6,2-4,5,7,4-8,2-4-8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,2-3-4-7,1,2-3-7,5,6,9", ["51RM1457","36RM69","33RM1457","21RM145678","54RM69","9RM69","78RM1456789","27RM69","45RM69","76RM156789"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,2-4-9,2-3-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-8,2-3-4,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-6-8-9,3-4-8-9,1,3-4-5-7-8,2-3-4,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8,1,4-5-9,8,4-5-7,3,9,6,2,4-5-7,9,3,1,6,2-4,5,7,4-8,2-4-8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,2-3-4,1,2-3,5,6,9", ["76SV4","74SV2","20SV4"])
,new step("SIMPLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,2-6-9,2-3-6-8-9,2-3-4-8-9,5,2-3-4-8,2-3-4,2-4-5-9,2-3-6-9,2-4-5-7-8,2-4-6-9,2-6-8-9,3-4-8-9,1,3-4-5-7-8,2-3-4,7,2-3-6-9,2-4-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8,1,4-5-9,8,4-5-7,3,9,6,2,4-5-7,9,3,1,6,2-4,5,7,4-8,2-4-8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,2-3,5,6,9", ["49RM1469","40RM1469","78RM12456789","59RM1456789","25RM1457","27RM1457","47RM1234678","29RM1234678","31RM1469"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,2-6-9,2-3-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-7-8,2-4-6-9,2-6-8-9,3-4-8-9,1,3-4-5-7-8,2-3-4,7,2-3-6-9,2-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8,1,5-9,8,5-7,3,9,6,2,4-5-7,9,3,1,6,2,5,7,4-8,2-4-8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,3,5,6,9", ["78SV3","54SV4","59SV2"])
,new step("SIMPLE", "6,8,5,2-3,7,2-3-9,1-2-3-4-9,3-4-9,1-2-3-4,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,2-6-9,2-3-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-7-8,2-4-6-9,2-6-8-9,3-4-8-9,1,3-4-5-7-8,2-3-4,7,2-3-6-9,2-5-8,2-4-6-9,1,3-4-8-9,3-4-8-9,3-4-5-8,1,5-9,8,5-7,3,9,6,2,4,9,3,1,6,2,5,7,4-8,2-4-8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,3,5,6,9", ["36RM12469","34RM1246","6RM13457","24RM13457","23RM123578","43RM1246","9RM469","44RM1246","41RM123578","63RM12345679","32RM123578","45RM12469"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-9,1-2-3-4-9,3-4-9,1-2-3,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-7-8,4-6-9,2-6-8-9,3-8-9,1,3-5-7-8,2-3-4,7,2-3-6-9,2-5-8,4-6-9,1,3-8-9,3-8-9,3-5-8,1,5-9,8,5-7,3,9,6,2,4,9,3,1,6,2,5,7,4-8,8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,3,5,6,9", ["36SV7","62SV4","7SV4","49SV7"])
,new step("SIMPLE", "6,8,5,2-3,7,2-9,4,3-4-9,1-2-3,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-7-8,4-6-9,2-6-8-9,3-8-9,1,7,2-3-4,7,2-3-6-9,2-5-8,4-6-9,1,3-8-9,3-8-9,3-5-8,1,5-9,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,3,5,6,9", ["8RM1245678","31RM134679"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-9,4,3-9,1-2-3,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-8,4-6-9,2-6-8-9,3-8-9,1,7,2-3-4,7,2-3-6-9,2-5-8,4-6-9,1,3-8-9,3-8-9,3-5-8,1,5-9,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1-2-3,3,1-2-3,8,2,7,4,1,3,5,6,9", ["70SV1","47SV5","63SV8","9SV1","45SV5","44SV8"])
,new step("SIMPLE", "6,8,5,2-3,7,2-9,4,3-9,1,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3-8,2-3-4,5-9,2-3-6-9,2-5-8,4-6-9,2-6-8-9,3-8-9,1,7,2-3-4,7,2-3-6-9,2-5-8,4-6-9,1,3-8-9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,1-2-3,8,2,7,4,1,3,5,6,9", ["72RM1456789","34RM1245678","40RM1578","43RM1245678","27RM1456789","29RM12345678"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2-9,4,3-9,1,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3,2-3-4,9,2-3-6-9,2-5-8,4-6-9,2-6-8-9,3-9,1,7,2-3-4,7,2-3-6-9,2,4-6-9,1,3-9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2-3,8,2,7,4,1,3,5,6,9", ["51SV9","8SV9","29SV9","31SV5","72SV2"])
,new step("SIMPLE", "6,8,5,2-3,7,2-9,4,9,1,2-3,1,2-3-9,2-3-8,5,4,2-3-8-9,7,6,7,4,2-3-9,1,6-9,2-6-8-9,2-3-8-9,5,2-3,2-3-4,9,2-3-6-9,5,4-6-9,2-6-8-9,3-9,1,7,2-3-4,7,2-3-6-9,2,4-6-9,1,3-9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["33RM134579","34RM1579","39RM15789","6RM13456789","24RM134579","25RM145679","41RM13579","27RM12456789","30RM15789","32RM13579","16RM145679"])
,new step("HIDDEN_SINGLE", "6,8,5,2-3,7,2,4,9,1,2-3,1,2-3-9,2-3-8,5,4,2-3-8,7,6,7,4,2-3-9,1,6-9,2-6-8,2-3-8,5,3,2-3-4,9,2-3-6,5,4-6,2-6-8,3,1,7,2-3-4,7,2-3-6,2,4-6,1,3-9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["71SV3","4SV3","33SV8","12SV9","27SV3","23SV9","13SV8","43SV9"])
,new step("SIMPLE", "6,8,5,3,7,2,4,9,1,2-3,1,9,8,5,4,2-3-8,7,6,7,4,2-3-9,1,9,2-6-8,2-3-8,5,3,2-3-4,9,2-3-6,5,4-6,8,3,1,7,2-3-4,7,2-3-6,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["21RM13456789","24RM1345789","25RM1345679","16RM13456789"])
,new step("HIDDEN_SINGLE", "6,8,5,3,7,2,4,9,1,2-3,1,9,8,5,4,2,7,6,7,4,2,1,9,2-6,2-8,5,3,2-3-4,9,2-3-6,5,4-6,8,3,1,7,2-3-4,7,2-3-6,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["34SV3","6SV2","25SV8","40SV2","24SV6","10SV3"])
,new step("SIMPLE", "6,8,5,3,7,2,4,9,1,3,1,9,8,5,4,2,7,6,7,4,2,1,9,6,8,5,3,2-3-4,9,2-3-6,5,4-6,8,3,1,7,2-3-4,7,2-3-6,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["39RM125789","37RM12356789","28RM1356789","30RM135789"])
,new step("HIDDEN_SINGLE", "6,8,5,3,7,2,4,9,1,3,1,9,8,5,4,2,7,6,7,4,2,1,9,6,8,5,3,2-4,9,2-6,5,4-6,8,3,1,7,4,7,3-6,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["16SV2","21SV2","39SV3","28SV2"])
,new step("SIMPLE", "6,8,5,3,7,2,4,9,1,3,1,9,8,5,4,2,7,6,7,4,2,1,9,6,8,5,3,2,9,2-6,5,4-6,8,3,1,7,4,7,3,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["30RM12345789"])
,new step("HIDDEN_SINGLE", "6,8,5,3,7,2,4,9,1,3,1,9,8,5,4,2,7,6,7,4,2,1,9,6,8,5,3,2,9,6,5,4-6,8,3,1,7,4,7,3,2,4-6,1,9,8,5,1,5,8,7,3,9,6,2,4,9,3,1,6,2,5,7,4,8,5,6,4,9,8,7,1,3,2,8,2,7,4,1,3,5,6,9", ["37SV4","32SV4","30SV6","41SV6"])
])
];

function step(strategyName, sudokuBefore, commands) {
  this.strategyName = strategyName;
  this.sudokuBefore = sudokuBefore;
  this.commands = commands;
}

function solution(id, quest, result, level, unique, steps) {
  this.id = id;
  this.quest = quest;
  this.result = result;
  this.level = level;
  this.unique = unique;
  this.steps = steps;
}

function command(cmdClass, cellNumber, candidateNumber) {
  this.cmdClass = cmdClass;
  this.cellNumber = cellNumber;
  this.candidateNumber = candidateNumber;
  this.candidateNumbers = null;
  this.execute = function() {
    if (cmdClass == "createCandidate") {
      createCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "removeCandidate") {
      removeCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "setCell") {
      this.candidateNumbers = getCandidateArray(cellNumber);
      promoteCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "unsetCell") {
      removeFixed(cellNumber, candidateNumber);
    } else {
      alert("Unbekannter Befehl: " + cmdClass);
    }
    updateStatisticsAsync();
  }
  this.unexecute = function() {
    if (cmdClass == "createCandidate") {
      removeCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "removeCandidate") {
      createCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "setCell") {
      buildCandidates(getCellId(cellNumber));
      var index = 0;
      for (var i = 1; i <= size; i++) {
        if (i == this.candidateNumbers[index]) {
          index++;
        } else {
          removeCandidateDo(cellNumber, i);
        }
      }
    } else if (cmdClass == "unsetCell") {
      promoteCandidateDo(cellNumber, candidateNumber);
    } else {
      alert("Unbekannter Befehl: " + cmdClass);
    }
    updateStatisticsAsync();
  }
}

function ableCmdButtons() {
  if (undoCmd.length <= 0) {
    document.getElementById("undoButton").disabled=true;
  } else {
    document.getElementById("undoButton").disabled=false;
  }
  if (doCmd.length <= 0) {
    document.getElementById("doButton").disabled=true;
  } else {
    document.getElementById("doButton").disabled=false;
  }
}

function createAndExecuteCmd(cmdClass, cellNumber, candidateNumber) {
  var cmd = new command(cmdClass, cellNumber, candidateNumber);
  cmd.execute();
  this.undoCmd.push(cmd);
  this.doCmd = new Array();
  ableCmdButtons();
}

function doCommand() {
  if (doCmd.length > 0) {
    var cmd = doCmd.pop();
    cmd.execute();
    undoCmd.push(cmd);
    ableCmdButtons();
  } else {
    alert("Es liegen keine Befehle zur Ausführung vor.");
  }
}

function undoCommand() {
  if (undoCmd.length > 0) {
    var cmd = undoCmd.pop();
    cmd.unexecute();
    doCmd.push(cmd);
    ableCmdButtons();
  } else {
    alert("Es liegen keine Rückgängig-Befehle zur Ausführung vor.");
  }
}

function updateStatisticsAsync() {
  if (updateStatisticsId != null) {
    clearTimeout(updateStatisticsId);
  }
  updateStatisticsId = setTimeout(updateStatistics, 100);
}

function updateStatistics() {
  var fixedCellNumber = 0;
  var candidateNumber = 0;
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      fixedCellNumber++;
    } else {
      for (var k = 1; k <= size; k++) {
        var candidate = getCandidate(i, k);
        if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
          candidateNumber++;
        }
      }
    }
    checkConflict(i);
  }
  document.getElementById("fixedCellNumber").value = fixedCellNumber;
  document.getElementById("candidateNumber").value = candidateNumber;
}

function switchVisibility(switchId) {
  var configSwitch = document.getElementById(switchId);
  var configSwitchBlock = document.getElementById(configSwitch.id + "Block");
  var content = configSwitch.firstChild.data;
  if (configSwitch.firstChild.data.match(/^\+$/)) {
    configSwitch.replaceChild(document.createTextNode("-"), configSwitch.firstChild);
    configSwitchBlock.style.visibility = "visible";
    configSwitchBlock.style.display = "block";
  } else {
    configSwitch.replaceChild(document.createTextNode("+"), configSwitch.firstChild);
    configSwitchBlock.style.visibility = "hidden";
    configSwitchBlock.style.display = "none";
  }
}

function addStyle(style, newStyle) {
  var erg = style.indexOf(newStyle);
  if (erg >= 0) {
    return style;
  } else {
    return style + " " + newStyle;
  }
}

function removeStyle(style, oldStyle) {
  var erg = style.indexOf(" " + oldStyle);
  if (erg >= 0) {
    return style.substr(0, erg);
  } else {
    return style;
  }
}

function getCell(cellId) {
  return document.getElementById(cellId);
}

function getCellId(cellNumber) {
  return "cell" + cellNumber;
}

function getCandidate(cellNumber, c) {
  return document.getElementById(getCandidateId(getCellId(cellNumber), c));
}

function getCandidateId(cellId, c) {
  return cellId + "candidate" + c;
}

function getColumnNumber(cellNumber) {
  column = cellNumber % size;
  if (column == 0) {
    return size;
  }
  return column;
}

function getBlockNumber(cellNumber) {
  row = getRowNumber(cellNumber);
  column = getColumnNumber(cellNumber);
  return Math.floor((row - 1)/ subSize) * subSize + Math.floor((column - 1)/ subSize) + 1;
}

function getFixedValue(cellNumber) {
  if (isCellFixed(cellNumber)) {
    return getValue(getCell(getCellId(cellNumber)));
  }
  return null;
}

function getRowNumber(cellNumber) {
  return Math.floor((cellNumber - 1)/ size) + 1;
}

function getValue(node) {
  return parseInt(node.firstChild.data);
}

function isCellFixed(cellNumber) {
  if (getCell(getCellId(cellNumber)).firstChild.nodeType == 3) {
    return true;
  }
  return false;
}

function buildBoard() {
  var boardTable = document.createElement("table");
  boardTable.id = "board";
  boardTable.border = "0";
  boardTable.cellPadding = "0";
  boardTable.cellSpacing = "0";
  document.getElementById("sudoku").appendChild(boardTable);
  var row = null;
  for (var i = 1; i <= size * size; i++) {
    if (i % size == 1) {
      var row = document.createElement("tr");
      row.id = "row" + (Math.floor(i / size) + 1);
      boardTable.appendChild(row);
    }
    var cell = document.createElement("td");
    cell.id = getCellId(i);
    cell.className = "fixed block" + getBlockNumber(i);
    row.appendChild(cell);
    var cellText = document.createTextNode(i);
    cell.appendChild(cellText);
  }
}

function buildCandidates(cellId) {
  cell = getCell(cellId);
  cell.className = removeStyle(cell.className, "original")
  cell.className = removeStyle(cell.className, "conflict")
  cell.className = removeStyle(cell.className, "highlight3")
  cell.onmouseover = null;
  cell.onmouseout = null;
  cell.onclick = null;
  cell.ondblclick = null;
  candidatesTable = document.createElement("table");
  candidatesTable.id = cellId + "candidate";
  candidatesTable.border = "0"
  candidatesTable.cellPadding = "0";
  candidatesTable.cellSpacing = "0";
  var candidatesRow = null;
  for (var i = 1; i <= size; i++) {
    if (i % subSize == 1) {
      candidatesRow = document.createElement("tr");
      candidatesRow.id = cellId + "row" + (Math.floor(i / subSize) + 1);
      candidatesTable.appendChild(candidatesRow);
    }
    candidatesCell = document.createElement("td");
    candidatesCell.id = getCandidateId(cellId, i);
    candidatesCell.className = "candidate";
    if (document.getElementById("candidateButton" + i).className.match(/candidateButtonOn/g)) {
      candidatesCell.className = addStyle(candidatesCell.className, "highlight1");
    }
    candidatesCell.onmouseover = enterCandidate;
    candidatesCell.onmouseout = exitCandidate;
    candidatesCell.onclick = removeCandidate;
    candidatesCell.ondblclick = promoteCandidate;
    candidatesRow.appendChild(candidatesCell);
    cellText = document.createTextNode(i);
    candidatesCell.appendChild(cellText);
  }
  cell.replaceChild(candidatesTable, cell.firstChild);
}

function buildFixed(cellNumber, value) {
  cell = getCell(getCellId(cellNumber));
  cell.className = removeStyle(cell.className, "conflict")
  cell.onmouseover = enterFixed;
  cell.onmouseout = exitFixed;
  if (isInOriginal(cellNumber)) {
    cell.className = addStyle(cell.className, "original");
  } else {
    cell.className = removeStyle(cell.className, "original");
  }
  var cellText = document.createTextNode(value);
  cell.replaceChild(cellText, cell.firstChild);
}

function loadSudoku() {
  if (document.getElementById("sudokuAsString").value.match(/^[0-9\.]{81}$/)) {
    original = document.getElementById("sudokuAsString").value;
    for (var i = 1; i <= size * size; i++) {
      value = original.substr(i - 1, 1);
      if (value == ".") {
        buildCandidates(getCellId(i));
      } else {
        buildFixed(i, value);
      }
    }
  } else {
    if (!parseSudokuString(document.getElementById("sudokuAsString").value)) {
      alert("Sudoku ist ungültig!");
    }
  }
  updateStatisticsAsync();
}

function removeAllCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      // Nix machen!
    } else {
      // Fixed aus Zeile, Spalte und Block sammeln
      removeCandidates(i);
    }
  }
}

function collectFixed(cellNumber) {
  var fixed = new Array();
  for (var i = 1; i <= size; i++) {
    fixed[i] = false;
  }
  for (var i = 1; i <= size * size; i++) {
    if (i != cellNumber) {
      if (getRowNumber(i) == getRowNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
      if (getColumnNumber(i) == getColumnNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
      if (getBlockNumber(i) == getBlockNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
    }
  }
  return fixed;
}

function removeCandidates(cellNumber) {
  var fixed = collectFixed(cellNumber);
  for (var i = 1; i <= size; i++) {
    if (fixed[i]) {
      var candidate = getCandidate(cellNumber, i);
      if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
        createAndExecuteCmd("removeCandidate", cellNumber, i);
      }
    }
  }
}

function conflictsCandidate(cellNumber, c) {
  return collectFixed(cellNumber)[c];
}

function highlightFixedOn(value) {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      var cell = getCell(getCellId(i));
      if (value == getValue(cell)) {
        cell.className = addStyle(cell.className, "highlight3");
      }
    }
  }
}

function highlightFixedOff(value) {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      var cell = getCell(getCellId(i));
      if (value == getValue(cell)) {
        cell.className = removeStyle(cell.className, "highlight3");
      }
    }
  }
}

function enterFixed() {
  var value = getValue(this);
  if (document.getElementById("highlightFixed").checked) {
    this.className = addStyle(this.className, "highlight3");
  }
  if (document.getElementById("highlightAllFixed").checked) {
    highlightFixedOn(value);
  }
  if (document.getElementById("highlightAllFixedAndCandidates").checked) {
    highlightCandidateOn(value, "highlight2");
  }
}

function exitFixed() {
  var value = getValue(this);
  this.className = removeStyle(this.className, "highlight3");
  highlightFixedOff(value);
  highlightCandidateOff(value, "highlight2");
}

function enterCandidate() {
  var value = getValue(this);
  if (document.getElementById("highlightCandidates").checked) {
    this.className = addStyle(this.className, "highlight2");
  }
  if (document.getElementById("highlightAllCandidates").checked) {
    highlightCandidateOn(value, "highlight2");
  }
  if (document.getElementById("highlightAllCandidatesAndFixed").checked) {
    highlightFixedOn(value);
  }
}

function exitCandidate() {
  var value = getValue(this);
  this.className = removeStyle(this.className, "highlight2");
  highlightCandidateOff(value, "highlight2");
  highlightFixedOff(value);
}

function removeCandidateDo(cellNumber, candidateNumber) {
  var candidate = getCandidate(cellNumber, candidateNumber);
  if (candidate.firstChild == null || candidate.firstChild.data.length <= 0) {
    return;
  }
  candidate.className = removeStyle(candidate.className, "highlight1");
  candidate.className = removeStyle(candidate.className, "highlight2");
  candidate.onmouseover = null;
  candidate.onmouseout = null;
  //candidate.onclick = null;
  //candidate.ondblclick = null;
  candidate.removeChild(candidate.firstChild);
}

function createCandidateDo(cellNumber, candidateNumber) {
  var candidate = getCandidate(cellNumber, candidateNumber);
  candidate.className = "candidate";
  candidate.onmouseover = enterCandidate;
  candidate.onmouseout = exitCandidate;
  //candidate.onclick = removeCandidate;
  //candidate.ondblclick = promoteCandidate;
  if (isCandidateButtonOn(candidateNumber)) {
    candidate.className = addStyle(candidate.className, "highlight1");
  }
  candidateText = document.createTextNode(candidateNumber);
  candidate.appendChild(candidateText);
}

function createOrRemoveCandidateDo(candidateId) {
  var candidate = document.getElementById(candidateId);
  candidateId.match(/cell(\d+)candidate(\d+)/g);
  if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
    createAndExecuteCmd("removeCandidate", parseInt(RegExp.$1), parseInt(RegExp.$2));
  } else {
    createAndExecuteCmd("createCandidate", parseInt(RegExp.$1), parseInt(RegExp.$2));
  }
}

function promoteCandidateDo(cellNumber, candidateNumber) {
  buildFixed(cellNumber, candidateNumber);
  var cellId = getCellId(cellNumber)
  var cell = document.getElementById(cellId);
  if (conflictsCandidate(cellNumber, candidateNumber)) {
    cell.className = addStyle(cell.className, "conflict");
  }
  cell.replaceChild(document.createTextNode(candidateNumber), cell.firstChild);
  cell.onclick = resetFixed;
  checkAllConflicts(cellNumber);
  if (isSolved()) {
    var board = document.getElementById("board");
    board.className = addStyle(board.className, "solved");
  }
}

var dblclick = false;

function removeCandidate() {
  var candidateId = this.id;
  setTimeout(function() {
    if (dblclick == true) {
      return;
    }
    createOrRemoveCandidateDo(candidateId);
  }, 250);
}

function promoteCandidate() {
  var candidateId = this.id;
  dblclick = true;
  candidateId.match(/cell(\d+)candidate(\d+)/g);
  createAndExecuteCmd("setCell", parseInt(RegExp.$1), parseInt(RegExp.$2));
  setTimeout(function() {
    dblclick = false;
  }, 250);
}

function buildCandidateButtons() {
  var candidateButtons = document.getElementById("candidateButtons");
  for (var i = 1; i <= size; i++) {
    var candidateButton = document.createElement("div");
    candidateButton.id = "candidateButton" + i;
    candidateButton.className = "candidateButtonOff";
    candidateButton.onclick = highlightCandidates;
    candidateButtons.appendChild(candidateButton);
    candidateButton.appendChild(document.createTextNode(i));
  }
}

function highlightCandidateOn(candidate, cssClassName) {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        var candidateNode = getCandidate(i, k);
        if (candidateNode.childNodes.length > 0 && candidateNode.firstChild.data.length > 0) {
          if (k == candidate) {
            candidateNode.className = addStyle(candidateNode.className, cssClassName);
          }
        }
      }
    }
  }
}

function highlightCandidateOff(candidate, cssClassName) {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        var candidateNode = getCandidate(i, k);
        if (candidateNode.childNodes.length > 0 && candidateNode.firstChild.data.length > 0) {
          if (k == candidate) {
            candidateNode.className = removeStyle(candidateNode.className, cssClassName);
          }
        }
      }
    }
  }
}

function highlightCandidates() {
  var candidate = parseInt(this.id.match(/\d+/g)[0]);
  if (this.className == "candidateButtonOff") {
    this.className = "candidateButtonOn";
    highlightCandidateOn(candidate, "highlight1");
  } else {
    this.className = "candidateButtonOff";
    highlightCandidateOff(candidate, "highlight1");
  }
}

function isCandidateButtonOn(value) {
  for (var i = 1; i <= size; i++) {
    var candidateButton = document.getElementById("candidateButton" + i);
    if (candidateButton.className.match(/candidateButtonOn/g)) {
      return true;
    }
  }
  return false;
}

function removeFixed(cellNumber, candidateNumber) {
  highlightFixedOff(candidateNumber);
  highlightCandidateOff(candidateNumber, "highlight2");
  if (isInOriginal(cellNumber)) {
    // Nix machen
  } else {
    // Reset
    buildCandidates(getCellId(cellNumber));
    checkAllConflicts(cellNumber);
  }
  if (!isSolved()) {
    var board = document.getElementById("board");
    board.className = removeStyle(board.className, "solved");
  }
}

function resetFixed() {
  var cellNumber = parseInt(this.id.match(/\d+/g)[0]);
  var value = getValue(this);
  createAndExecuteCmd("unsetCell", cellNumber, value);
}

function isInOriginal(cellNumber) {
  var originalChar = original.substr(cellNumber - 1, 1);
  if (originalChar.match(/\d+/)) {
    return true;
  }
  return false;
}

function resetAllCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      buildCandidates(getCellId(i));
    }
  }
}

function emptyCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        removeCandidateDo(getCandidateId(getCellId(i), k));
      }
    }
  }
}

function copyAndLoadSudoku() {
  document.getElementById("sudokuAsString").value = document.getElementById("quests").value;
  loadSudoku();
}

function checkAllConflicts(cellNumber) {
  for (var i = 1; i <= size * size; i++) {
    if (getRowNumber(i) == getRowNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
    if (getColumnNumber(i) == getColumnNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
    if (getBlockNumber(i) == getBlockNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
  }
}

function checkConflict(cellNumber) {
  var cellId = getCellId(cellNumber);
  var cell = document.getElementById(cellId);
  if (isCellFixed(cellNumber)) {
    if (conflictsCandidate(cellNumber, getFixedValue(cellNumber))) {
      cell.className = addStyle(cell.className, "conflict");
    } else {
      cell.className = removeStyle(cell.className, "conflict");
    }
  }
}

function hideCandidates() {
  var hideButton = document.getElementById("hideButton");
  if (hideButton.value == "Ausblenden") {
    //var stylesheets = document.styleSheets;
    for (var i = 1; i <= size * size; i++) {
      if (!isCellFixed(i)) {
        for (var k = 1; k <= size; k++) {
          var candidate = getCandidate(i, k);
          candidate.className = addStyle(candidate.className, "hide");
        }
      }
    }
    hideButton.value = "Einblenden";
  } else {
    for (var i = 1; i <= size * size; i++) {
      if (!isCellFixed(i)) {
        for (var k = 1; k <= size; k++) {
          var candidate = getCandidate(i, k);
          candidate.className = removeStyle(candidate.className, "hide");
        }
      }
    }
    hideButton.value = "Ausblenden";
  }
}

function saveSudoku() {
  var sudokuAsString = buildSudokuString(false);
  document.getElementById("sudokuAsString").value = sudokuAsString;
}

function isSolved() {
  var sum = (size * (size + 1)) / 2;
  var rowSum = new Array();
  var columnSum = new Array();
  var blockSum = new Array();
  for (var i = 1; i <= size; i++) {
    rowSum[i] = 0;
    columnSum[i] = 0;
    blockSum[i] = 0;
  }
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      rowSum[getRowNumber(i)] = rowSum[getRowNumber(i)] + getFixedValue(i);
      columnSum[getColumnNumber(i)] = columnSum[getColumnNumber(i)] + getFixedValue(i);
      blockSum[getBlockNumber(i)] = blockSum[getBlockNumber(i)] + getFixedValue(i);
    }
  }
  for (var i = 1; i <= size; i++) {
    if (rowSum[i] != sum) {
      return false;
    }
    if (columnSum[i] != sum) {
      return false;
    }
    if (blockSum[i] != sum) {
      return false;
    }
  }
  return true;
}

function eraseCookie() {
  var name = "SudokuAsString";
  var domain = null; //"jdufner.de";
  var expires = new Date((new Date()).getTime() - 1000*3600*24).toGMTString();
  var path = null;
  //var secure = null;
  var cook = name + "=";
  cook += (domain) ? "; domain=" + domain : "";
  cook += (expires) ? "; expires=" + expires : "";
  cook += (path) ? "; path=" + path : "";
  //cook += (secure) ? "; secure" : "";
  document.cookie = cook;
}

function setCookie(wert) {
  var name = "SudokuAsString";
  var domain = null; //"jdufner.de";
  var expires = new Date((new Date()).getTime() + 1000*3600*24*7).toGMTString();
  var path = null;
  //var secure = null;
  var cook = name + "=" + unescape(wert);
  cook += (domain) ? "; domain=" + domain : "";
  cook += (expires) ? "; expires=" + expires : "";
  cook += (path) ? "; path=" + path : "";
  //cook += (secure) ? "; secure" : "";
  document.cookie = cook;
}

function getCookie() {
  var name = "SudokuAsString";
  var i = 0;  //Suchposition im Cookie
  var suche = name + "=";
  while (i < document.cookie.length) {
    if (document.cookie.substring(i, i + suche.length) == suche) {
      var ende = document.cookie.indexOf(";", i + suche.length);
      if (ende <= -1) {
        ende = document.cookie.length;
      }
      var cook = document.cookie.substring(i + suche.length, ende);
      return unescape(cook);
    }
    i++;
  }
  return "";
}

function getCandidateArray(cellNumber) {
  var candidates = new Array();
  for (var i = 1; i <= size; i++) {
    var candidate = getCandidate(cellNumber, i);
    if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
      candidates.push(i);
    }
  }
  return candidates;
}

function buildCandidateString(cellNumber) {
  return getCandidateArray(cellNumber).join("-");
}

function buildSudokuString(forceIncloseCandidates) {
  var sudoku = new Array();
  var incloseCandidates = document.getElementById("incloseCandidates").checked;
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      sudoku[i-1] = getFixedValue(i);
    } else {
      if (forceIncloseCandidates || incloseCandidates) {
        sudoku[i-1] = buildCandidateString(i);
      } else {
        sudoku[i-1] = ".";
      }
    }
  }
  if (forceIncloseCandidates || incloseCandidates) {
    return sudoku.join(",");
  } else {
    return sudoku.join("");
  }
}

function saveSudokuInCookie() {
  var sudokuString = buildSudokuString(true);
  if (sudokuString.length > 4000) {
    alert("Sudoku kann nicht gespeichert werden");
  }
  setCookie(sudokuString);
}

function parseSudokuString(sudokuString) {
  var sudoku = sudokuString.split(",");
  original = "";
  for (var i = 1; i <= size * size; i++) {
    if (sudoku[i-1].match(/^(\d+)$/)) {
      // fixed
      original += parseInt(RegExp.$1);
    } else {
      // candidates
      original += ".";
    }
  }
  for (var i = 1; i <= size * size; i++) {
    if (sudoku[i-1].match(/^(\d+)$/)) {
      // fixed
      buildFixed(i, parseInt(RegExp.$1));
    } else {
      // candidates
      if (sudoku[i-1].match(/^([0-9\-]+)$/)) {
        var candidates = sudoku[i-1].split("-");
        var cellId = getCellId(i);
        buildCandidates(cellId);
        var candidate = parseInt(candidates.shift());
        for (var k = 1; k <= size; k++) {
          if (k != candidate) {
            removeCandidateDo(i, k);
          } else {
            candidate = parseInt(candidates.shift());
          }
        }
      } else {
        return false;
      }
    }
  }
  return true;
}

function loadSudokuFromCookie() {
  var sudokuString = getCookie();
  parseSudokuString(sudokuString);
  updateStatisticsAsync();
}

function buildQuests() {
  var questsNode = document.getElementById("quests");
  for (var i = 0; i < this.sudokus.length; i++) {
    alert(this.sudokus[i].id);
    var optionNode = document.createElement("option");
    var valueAttribute = document.createAttribute("value");
    valueAttribute.nodeValue = sudokus[i].quest;
    optionNode.setAttributeNode(valueAttribute);
    var textNode = document.createTextNode(sudokus[i].id + " " + sudokus[i].level);
    optionNode.appendChild(textNode);
    questsNode.appendChild(optionNode);
  }
}

function main() {
  buildBoard();
  buildCandidateButtons();
  buildQuests();
}

main();

-->
  </script>
</html>
