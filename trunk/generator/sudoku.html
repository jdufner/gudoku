<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>Sudoku 2010-02</title>
    <meta name="author" content="Jürgen Dufner"/>
    <meta name="description" content="Sudoku"/>
    <meta name="keywords" content="Sudoku"/>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-15"/>
    <style type="text/css">
<!--
* {
  font-family: Verdana, Arial, Helvetica, sans-serif;
}
table#board {
  margin: 10px;
}
table#board.solved {
  border: #00ff00 solid 2px;
}
td.fixed {
  font-size: 15px;
  font-weight: bold;
  text-align: center;
  vertical-align: middle;
  border: #999999 solid 1px;
  width: 40px;
  min-width: 40px;
  max-width: 40px;
  height: 40px;
  min-height: 40px;
  max-height: 40px;
  margin: 0px;
  padding: 0px;
  cursor: default;
}
td.candidate {
  font-size: 9px;
  font-weight: normal; 
  text-align: center;
  vertical-align: middle;
  width: 13px;
  min-width: 13px;
  max-width: 13px;
  height: 13px;
  min-height: 13px;
  max-height: 13px;
  cursor: default;
}
td.block1, td.block3, td.block5, td.block7, td.block9 {
  background-color: #FFFFFF;
}
td.block2, td.block4, td.block6, td.block8 {
  background-color: #CCCCCC;
}
td.original {
  color: #0000ff;
}
td.conflict {
  border: #ff0000 solid 1px;
}
/* Kandidaten per Knopf hervorheben */
td.highlight1 {
  background-color: #ffff99; /* gelb */
}
/* Kandidaten onmouseover / onmouseout */
td.highlight2 {
  background-color: #ff9999; /* rot */
}
/* Fixed / Zellen */
td.highlight3 {
  background-color: #99ff99; /* gruen */
}
td.hide {
  visibility: hidden;
}
div.candidateButtonOff {
  margin: 2px;
  padding: 2px;
  border: 2px #999999 outset;
  background-color: #ffff99;
  cursor: default;
}
div.candidateButtonOn {
  margin: 2px;
  padding: 2px;
  border: 2px #999999 inset;
  background-color: #cccc99;
  cursor: default;
}
-->
    </style>
  </head>
  <body>
    <h1>Sudoku 2010-02</h1>
    <div id="sudoku" style="float:left"></div>
    <div style="float:left; margin-left:10px;">
      <fieldset>
        <legend>Statistik</legend>
        <p>Gesetzte Zellen: <input id="fixedCellNumber" style="float:right;" type="text" size="3" readonly="true" value=""/></p>
        <p>Verbleibende Kandidaten: <input id="candidateNumber" style="float:right;" type="text" size="3" readonly="true" value=""/></p>
      </fieldset>
    </div>
    <div id="candidateButtons" style="float:left; margin-left:10px;"></div>
    <div id="buttons" style="clear:both; margin-top:10px;">
      <select id="quests" name="quests" size="1"></select>
      <input type="button" value="Laden" onclick="copyAndLoadSudoku()"/><br/>
      <input id="sudokuAsString" type="text" value="" size="81"/>
      <input id="incloseCandidates" type="checkbox">inkl. Kandidaten</input><input type="button" value="Laden" onclick="loadSudoku()"/><input type="button" value="Speichern" onclick="saveSudoku()"/><br/>
      <input type="button" value="Kandidaten entfernen" onclick="removeAllCandidates()"/><input type="button" value="Reset" onclick="resetAllCandidates()"/><input type="button" value="Leeren" onclick="emptyCandidates()"/><input id="hideButton" type="button" value="Ausblenden" onclick="hideCandidates()"/><br/>
      <input type="button" value="Aus Cookie laden" onclick="loadSudokuFromCookie()"/><input type="button" value="In Cookie speichern" onclick="saveSudokuInCookie()"/><br/>
      <input id="undoButton" type="button" value="&lt;&lt; Zurück &lt;&lt;" onclick="undoCommand();"/><input id="doButton" type="button" value="&gt;&gt; Vor &gt;&gt;" onclick="doCommand();"/><br/>
      <fieldset>
        <legend>Lösung (<span id="solution" style="cursor:default;" onclick="switchVisibility('solution');">+</span>)</legend>
        <div id="solutionBlock" style="visibility:hidden; display:none;">
          <div id="steps">
            <div><span id="step1" style="cursor:default;" onclick="switchVisibility('step1');">+</span> SIMPLE Vorher: 21 / 123 Nachher: 21 / 89 <input type="button" value="Ausführen" onclick="executeStep('1');"/></div>
            <div id="step1Block" style="visibility:hidden; display:none;">
              1RM123, 2RM212
            </div>
            <div><span id="step2" style="cursor:default;" onclick="switchVisibility('step2');">+</span> SIMPLE Vorher: 21 / 123 Nachher: 21 / 89 <input type="button" value="Ausführen" onclick="executeStep('1');"/></div>
            <div id="step2Block" style="visibility:hidden; display:none;">
              1RM123, 2RM212
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Spielhilfe (<span id="configHelp" style="cursor:default;" onclick="switchVisibility('configHelp');">+</span>)</legend>
        <div id="configHelpBlock" style="visibility:hidden; display:none;">
          <input id="showConflicts" type="checkbox" checked="true">Fehler zeigen (funktioniert noch nicht)</input><br/>
        </div>
      </fieldset>
      <fieldset>
        <legend>Zellen (<span id="configCellHighlight" style="cursor:default;" onclick="switchVisibility('configCellHighlight');">+</span>)</legend>
        <div id="configCellHighlightBlock" style="visibility:hidden; display:none;">
          <input id="highlightFixed" type="checkbox" checked="true">Zellen hervorheben</input><br/>
          <input id="highlightAllFixed" type="checkbox">Auch andere Zellen hervorheben</input><br/>
          <input id="highlightAllFixedAndCandidates" type="checkbox">Auch andere Kandidaten hervorheben</input><br/>
        </div>
      </fieldset>
      <fieldset>
        <legend>Kandidaten (<span id="configCandidateHighlight" style="cursor:default;" onclick="switchVisibility('configCandidateHighlight');">+</span>)</legend>
        <div id="configCandidateHighlightBlock" style="visibility:hidden; display:none;">
          <input id="highlightCandidates" type="checkbox" checked="true">Kandidaten hervorheben</input><br/>
          <input id="highlightAllCandidates" type="checkbox">Auch andere Kandidaten hervorheben</input><br/>
          <input id="highlightAllCandidatesAndFixed" type="checkbox">Auch andere Zellen hervorheben</input><br/>
        </div>
      </fieldset>
      Kandidaten und andere Kandidaten hervorheben: Nach setzen einer Zelle, werden die anderen Zellen nicht zurückgesetzt.
    </div>
  </body>
  <script language="javascript">
<!--
var size = 9;
var subSize = 3;
var original;
var doCmd = new Array();
var undoCmd = new Array();
var updateStatisticsId;
var sudoku = null;
var sudokus = [
new solution(50747, "....8.6..7.4....5.5..9...........796...6....3..18.............2.67.5.84...91.63..", "293485617784361259516927438438512796952674183671893524145738962367259841829146375", "leicht", true, [
new step("SIMPLE", "....8.6..7.4....5.5..9...........796...6....3..18.............2.67.5.84...91.63..", 24, 513, ["1RM45678","2RM45678","3RM1456789","4RM1689","6RM689","8RM45689","9RM23568","11RM4567","13RM1456789","14RM45789","15RM456789","16RM345678","18RM234567","20RM45679","21RM14579","24RM5689","23RM589","26RM4569","25RM356789","28RM15679","27RM23569","30RM14679","29RM1679","32RM56789","31RM16789","33RM6789","39RM134679","37RM13567","38RM136","43RM36789","44RM345679","41RM3568","42RM368","47RM168","46RM1578","52RM136789","51RM168","50RM1568","56RM2679","55RM25679","54RM1236789","53RM13456789","60RM1256","59RM12568","58RM125689","57RM124679","64RM456789","62RM234589","61RM234678","69RM145678","72RM2345678","67RM1456789","77RM135689","80RM12345689","73RM135679","74RM13679","81RM1234689"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,1-2-3-6,1-2-3,1-2-9,5,1-8-9,5,1-2-3-8,2-3-6-8,9,1-2-3-4-6-7,1-2-3-4-7,1-2-4,1-2-3-7-8,1-4-7-8,2-3-4-8,2-3-4-5-8,2-3-5-8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-8-9,2-4-5-7-8-9,2-5-8,6,1-2-4-7-9,1-2-4-5-7-9,1-2-4-5,1-2-8,3,2-3-4-6-9,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4-8,1-3-4-5-8,3-5-8,3-4-7,3-4-7-9,3-4-7-8-9,1-5-9,1-6-7,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1-9,2-4-8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 24, 218, ["44SV8","21SV6","62SV6","14SV6","60SV8","46SV6"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,1-2-9,5,1-8-9,5,1-2-3-8,6,9,1-2-3-4-6-7,1-2-3-4-7,1-2-4,1-2-3-7-8,1-4-7-8,2-3-4-8,2-3-4-5-8,2-3-5-8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-8-9,2-4-5-7-8-9,2-5-8,6,1-2-4-7-9,1-2-4-5-7-9,1-2-4-5,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4-8,1-3-4-5-8,3-5-8,3-4-7,3-4-7-9,8,1-5-9,6,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1-9,2-4-8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 30, 194, ["56RM268","39RM368","55RM268","37RM368","38RM368","23RM5689","26RM45689","57RM268"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,1-2-9,5,1-8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,1-2-4,1-2-3-7,1-4-7-8,2-3-4-8,2-3-4-5-8,2-3-5-8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,1-2-4-7-9,1-2-4-5-7-9,1-2-4-5,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,1-5-9,6,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1-9,2-4-8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 30, 186, ["30SV8","43SV1"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,1-2-9,5,1-8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,1-2-4,1-2-3-7,1-4-7-8,2-3-4-8,2-3-4-5-8,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,1-2-4-7-9,1-2-4-5-7-9,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,1-5-9,6,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1-9,2-4-8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 32, 178, ["25RM13678","28RM16789","41RM1368","42RM1368","29RM16789","61RM13678","16RM13678"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2-9,5,1-8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,1-4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7-9,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,5-9,6,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1-9,2-4-8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 32, 171, ["72SV1","73SV8"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,1-4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2-9,5,1-8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,1-4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7-9,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,5-9,6,2,1-2-3,6,7,2-3,5,2-3-9,8,4,1,8,2-4-5-8,9,1,2-4-7,6,3,7,5-7", 34, 166, ["18RM1236","9RM1236","27RM1236","64RM145678","74RM136789"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2-9,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7-9,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,5-9,6,2,2-3,6,7,2-3,5,2-3-9,8,4,1,8,2-4-5,9,1,2-4-7,6,3,7,5-7", 34, 161, ["61SV9","69SV9"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2-9,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7-9,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7-9,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7-9,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4-5,9,1,2-4-7,6,3,7,5-7", 36, 156, ["51RM689","59RM125689","42RM689","16RM136789"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7,2-4-5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4-5,9,1,2-4-7,6,3,7,5-7", 36, 152, ["52SV5","81SV5"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,2-3-4-5-7-9,1,8,2-3-4-7-9,2-3-4-5-7,5,2,4-5,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4-5,9,1,2-4-7,6,3,7,5", 38, 147, ["51RM1568","54RM12356789","47RM1568","74RM135689"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,2-4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,2-3-4-7-9,1,8,2-3-4-7-9,2-3-4-7,5,2,4,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4-7,6,3,7,5", 38, 143, ["25SV4","54SV4","53SV2","80SV7"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-2-3-7,4-7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-4-7,1-2-3-4-7,4,1-2-3-7,4-7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,2-3-4-7-9,1,8,2-3-4-7-9,2-3-4-7,5,2,4,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4-7,6,3,7,5", 42, 138, ["51RM124568","50RM124568","24RM4569","23RM4569","8RM2456789","77RM1356789","26RM2456789","9RM123456","27RM1234569","47RM124568"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-3,7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-7,1-2-3-7,4,1-3,7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4,6,3,7,5", 42, 123, ["16SV2"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-3,7-9,7,1-2-3-8-9,4,2-3,6,1-2-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-7,1-2-3-7,4,1-3,7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4,6,3,7,5", 43, 122, ["11RM24567","13RM24567","15RM24567"])
,new step("NAKED_PAIR", "1-2-3-9,1-2-3-9,2-3,2-3-4-5-7,8,1-2-3-4-5-7,6,1-3,7-9,7,1-3-8-9,4,3,6,1-3,2,5,8-9,5,1-2-3-8,6,9,1-2-3-7,1-2-3-7,4,1-3,7-8,2-3-4,2-3-4-5,8,2-3-4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,3-4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4,6,3,7,5", 43, 119, ["4RM123","6RM13","24RM13","23RM13","11RM13","58RM23","31RM23"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1-3,2,5,8-9,5,1-2-3-8,6,9,2-7,2-7,4,1-3,7-8,2-3-4,2-3-4-5,8,4-5,1-2-3-4,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,4-7,3-4-7,8,9,6,2,2-3,6,7,2-3,5,9,8,4,1,8,2-4,9,1,2-4,6,3,7,5", 43, 106, ["67SV2","15SV1","32SV1"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-2-3-8,6,9,2-7,2-7,4,1-3,7-8,2-3-4,2-3-4-5,8,4-5,1,1-2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,4-7,3-4-7,8,9,6,2,2-3,6,7,2,5,9,8,4,1,8,2-4,9,1,2-4,6,3,7,5", 46, 98, ["33RM16789","77RM125689","64RM12456789"])
,new step("HIDDEN_SINGLE", "1-2-3-9,1-2-3-9,2-3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-2-3-8,6,9,2-7,2-7,4,1-3,7-8,2-3-4,2-3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,4-7,3-4-7,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2-4,9,1,4,6,3,7,5", 46, 95, ["64SV3","13SV3","74SV2","59SV3"])
,new step("SIMPLE", "1-2-3-9,1-2-3-9,2-3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-2-3-8,6,9,2-7,2-7,4,1-3,7-8,2-3-4,2-3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,2-4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,3-7-9,3-7,5,2,4,1-3-4,1-3-4-5,3-5,4-7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 50, 88, ["1RM35678","2RM26","50RM13568","20RM26","56RM236789","55RM2356789","38RM26","28RM35678","57RM236789","29RM26"])
,new step("HIDDEN_SINGLE", "1-2-9,1-3-9,2-3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-3-8,6,9,2-7,2-7,4,1-3,7-8,2-4,3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1-4,1-4-5,5,4-7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 50, 78, ["58SV7","3SV3","77SV4"])
,new step("SIMPLE", "1-2-9,1-3-9,3,4-5-7,8,2-4-5-7,6,1-3,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-3-8,6,9,2-7,2-7,4,1-3,7-8,2-4,3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,4-5-7-9,2-5,6,2-4-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1-4,1-4-5,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 53, 73, ["2RM345678","20RM34567","4RM1236789","8RM368","41RM134568"])
,new step("HIDDEN_SINGLE", "1-2-9,1-9,3,4-5,8,2-4-5-7,6,1,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-8,6,9,2-7,2-7,4,1-3,7-8,2-4,3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,4-5-7-9,2-5,6,2-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1-4,1-4-5,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 53, 68, ["26SV3","1SV2","39SV2"])
,new step("SIMPLE", "2,1-9,3,4-5,8,2-4-5-7,6,1,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-8,6,9,2-7,2-7,4,3,7-8,2-4,3-4-5,8,4-5,1,2-3-4-5,7,9,6,2-4-9,4-5-7-9,2,6,2-7-9,2-4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1-4,1-4-5,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 56, 61, ["6RM2368","37RM1235678","28RM1235678","41RM12368","42RM12368"])
,new step("HIDDEN_SINGLE", "2,1-9,3,4-5,8,4-5-7,6,1,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1-8,6,9,2-7,2-7,4,3,7-8,4,3-4-5,8,4-5,1,2-3-4-5,7,9,6,4-9,4-5-7-9,2,6,7-9,4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1-4,1-4-5,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 56, 56, ["20SV1","55SV1","23SV2","37SV9","33SV2","57SV5","8SV1"])
,new step("SIMPLE", "2,1-9,3,4-5,8,4-5-7,6,1,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1,6,9,2,2-7,4,3,7-8,4,3-4-5,8,4-5,1,2,7,9,6,9,4-5-7-9,2,6,7-9,4-5-7,1,8,3,6,3-7-9,1,8,7-9,3-7,5,2,4,1,1-4-5,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 63, 42, ["2RM12345678","56RM12356789","24RM12345689","38RM123689","41RM123689","47RM12689"])
,new step("HIDDEN_SINGLE", "2,9,3,4-5,8,4-5-7,6,1,7-9,7,8-9,4,3,6,1,2,5,8-9,5,1,6,9,2,7,4,3,7-8,4,3-4-5,8,4-5,1,2,7,9,6,9,4-5-7,2,6,7,4-5-7,1,8,3,6,3-7,1,8,7-9,3-7,5,2,4,1,4,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 63, 35, ["50SV9","29SV3","11SV8","56SV4","28SV4","51SV3","27SV8"])
,new step("SIMPLE", "2,9,3,4-5,8,4-5-7,6,1,7-9,7,8,4,3,6,1,2,5,8-9,5,1,6,9,2,7,4,3,8,4,3,8,4-5,1,2,7,9,6,9,4-5-7,2,6,7,4-5-7,1,8,3,6,3-7,1,8,9,3,5,2,4,1,4,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 70, 22, ["18RM12345678","38RM1234689","47RM12345689","31RM12346789"])
,new step("HIDDEN_SINGLE", "2,9,3,4-5,8,4-5-7,6,1,7-9,7,8,4,3,6,1,2,5,9,5,1,6,9,2,7,4,3,8,4,3,8,5,1,2,7,9,6,9,5-7,2,6,7,4-5-7,1,8,3,6,7,1,8,9,3,5,2,4,1,4,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 70, 18, ["47SV7","9SV7","42SV4","41SV7","38SV5","24SV7","18SV9","4SV4","31SV5","2SV9"])
,new step("SIMPLE", "2,9,3,4,8,4-5-7,6,1,7,7,8,4,3,6,1,2,5,9,5,1,6,9,2,7,4,3,8,4,3,8,5,1,2,7,9,6,9,5,2,6,7,4,1,8,3,6,7,1,8,9,3,5,2,4,1,4,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 80, 3, ["6RM12346789"])
,new step("HIDDEN_SINGLE", "2,9,3,4,8,5,6,1,7,7,8,4,3,6,1,2,5,9,5,1,6,9,2,7,4,3,8,4,3,8,5,1,2,7,9,6,9,5,2,6,7,4,1,8,3,6,7,1,8,9,3,5,2,4,1,4,5,7,3,8,9,6,2,3,6,7,2,5,9,8,4,1,8,2,9,1,4,6,3,7,5", 80, 1, ["6SV5"])
])
,new solution(52243, "...........72.......64..835.32.7..4..6.....7..5..1.62.814..69.......21...........", "549863217387251496126497835932678541461529378758314629814736952675942183293185764", "leicht", true, [
new step("SIMPLE", "...........72.......64..835.32.7..4..6.....7..5..1.62.814..69.......21...........", 24, 513, ["1RM678","2RM13567","3RM2467","4RM24","5RM1247","6RM246","7RM135689","8RM234578","9RM358","10RM2678","11RM123567","14RM1247","15RM2467","16RM12356789","18RM23578","17RM234578","20RM1345678","19RM345678","24RM234568","23RM12345678","28RM2345678","31RM12347","36RM234567","33RM123467","34RM12346789","39RM234567","40RM12467","37RM235678","43RM1246789","41RM167","42RM1267","48RM1234567","45RM24567","46RM123568","51RM12567","49RM124567","54RM124567","59RM1246789","58RM124689","64RM1248","63RM145689","62RM12346789","71RM123479","72RM1259","65RM1234568","66RM124678","67RM1246","68RM1267","77RM1267","78RM26","79RM1689","80RM123479","73RM148","74RM134568","75RM124678","76RM246","81RM159"])
,new step("HIDDEN_SINGLE", "1-2-3-4-5-9,2-4-8-9,1-3-5-8-9,1-3-5-6-7-8-9,3-5-6-8-9,1-3-5-7-8-9,2-4-7,1-6-9,1-2-4-6-7-9,1-3-4-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1-2-9,2-9,6,4,9,1-7-9,8,3,5,1-9,3,2,5-6-8-9,7,5-8-9,5,4,1-8-9,1-4-9,6,1-8-9,3-5-8-9,2-3-4-5-8-9,3-4-5-8-9,3-5,7,1-3-8-9,4-7-9,5,8-9,3-8-9,1,3-4-8-9,6,2,3-8-9,8,1,4,3-5-7,3-5,6,9,5,2-3-7,3-5-6-7-9,7-9,3-5-9,3-5-7-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2-3-5-6-7-9,2-7-9,3-5-9,1-3-5-7-8-9,3-4-5-8-9,1-3-4-5-7-8-9,2-3-4-5-7,5-6-8,2-3-4-6-7-8", 24, 216, ["46SV7","31SV6","41SV2","24SV7","63SV2"])
,new step("SIMPLE", "1-2-3-4-5-9,2-4-8-9,1-3-5-8-9,1-3-5-6-7-8-9,3-5-6-8-9,1-3-5-7-8-9,2-4-7,1-6-9,1-2-4-6-7-9,1-3-4-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1-2-9,2-9,6,4,9,7,8,3,5,1-9,3,2,6,7,5-8-9,5,4,1-8-9,1-4-9,6,1-8-9,3-5-8-9,2,3-4-5-8-9,3-5,7,1-3-8-9,7,5,8-9,3-8-9,1,3-4-8-9,6,2,3-8-9,8,1,4,3-5-7,3-5,6,9,5,2,3-5-6-7-9,7-9,3-5-9,3-5-7-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2-3-5-6-7-9,2-7-9,3-5-9,1-3-5-7-8-9,3-4-5-8-9,1-3-4-5-7-8-9,2-3-4-5-7,5-6-8,2-3-4-6-7-8", 29, 197, ["4RM2467","6RM2467","81RM1259","9RM25","78RM267","79RM129","64RM78","73RM78"])
,new step("HIDDEN_SINGLE", "1-2-3-4-5-9,2-4-8-9,1-3-5-8-9,1-3-5-8-9,3-5-6-8-9,1-3-5-8-9,2-4-7,1-6-9,1-4-6-7-9,1-3-4-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1-2-9,2-9,6,4,9,7,8,3,5,1-9,3,2,6,7,5-8-9,5,4,1-8-9,1-4-9,6,1-8-9,3-5-8-9,2,3-4-5-8-9,3-5,7,1-3-8-9,7,5,8-9,3-8-9,1,3-4-8-9,6,2,3-8-9,8,1,4,3-5-7,3-5,6,9,5,2,3-5-6-9,7-9,3-5-9,3-5-7-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2-3-5-6-9,2-7-9,3-5-9,1-3-5-7-8-9,3-4-5-8-9,1-3-4-5-8-9,3-4-5-7,5-6-8,3-4-6-7-8", 29, 188, ["51SV4","58SV7","19SV1","37SV4","7SV2"])
,new step("SIMPLE", "1-2-3-4-5-9,2-4-8-9,1-3-5-8-9,1-3-5-8-9,3-5-6-8-9,1-3-5-8-9,2,1-6-9,1-4-6-7-9,1-3-4-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1,2-9,6,4,9,7,8,3,5,1-9,3,2,6,7,5-8-9,5,4,1-8-9,4,6,1-8-9,3-5-8-9,2,3-4-5-8-9,3-5,7,1-3-8-9,7,5,8-9,3-8-9,1,4,6,2,3-8-9,8,1,4,7,3-5,6,9,5,2,3-5-6-9,7-9,3-5-9,3-5-7-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2-3-5-6-9,2-7-9,3-5-9,1-3-5-7-8-9,3-4-5-8-9,1-3-4-5-8-9,3-4-5-7,5-6-8,3-4-6-7-8", 34, 172, ["1RM124678","2RM2","3RM167","67RM2467","10RM14678","78RM2467","28RM1478","42RM12467","76RM2467"])
,new step("HIDDEN_SINGLE", "3-5-9,4-8-9,3-5-8-9,1-3-5-8-9,3-5-6-8-9,1-3-5-8-9,2,1-6-9,1-4-6-7-9,3-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1,2-9,6,4,9,7,8,3,5,9,3,2,6,7,5-8-9,5,4,1-8-9,4,6,1-8-9,3-5-8-9,2,3-5-8-9,3-5,7,1-3-8-9,7,5,8-9,3-8-9,1,4,6,2,3-8-9,8,1,4,7,3-5,6,9,5,2,3-5-6-9,7-9,3-5-9,3-5-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2-3-5-6-9,2-7-9,3-5-9,1-3-5-8-9,3-4-5-8-9,1-3-5-8-9,3-4-5-7,5-6-8,3-4-6-7-8", 34, 160, ["9SV7","73SV2","36SV1","79SV7","59SV3","39SV1","20SV2"])
,new step("SIMPLE", "3-5-9,4-8-9,3-5-8-9,1-3-5-8-9,3-5-6-8-9,1-3-5-8-9,2,1-6-9,7,3-5-9,4-8-9,7,2,3-5-6-8-9,1-3-5-8-9,4,1-6-9,1-4-6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,5-8-9,5,4,1,4,6,1,3-5-8-9,2,3-5-8-9,3-5,7,1-3-8-9,7,5,8-9,3-8-9,1,4,6,2,3-8-9,8,1,4,7,3,6,9,5,2,3-5-6-9,7-9,3-5-9,3-5-8-9,3-4-5-8-9,2,1,5-6-8,3-4-6-7-8,2,2-7-9,3-5-9,1-3-5-8-9,3-4-5-8-9,1-3-5-8-9,7,5-6-8,3-4-6-7-8", 41, 136, ["18RM1257","72RM12579","5RM1237","81RM12579","67RM2367","68RM12367","77RM12367","78RM2367","74RM12345678","14RM1237","45RM124567","76RM2367"])
,new step("HIDDEN_SINGLE", "3-5-9,4-8-9,3-5-8-9,1-3-5-8-9,5-6-8-9,1-3-5-8-9,2,1-6-9,7,3-5-9,4-8-9,7,2,5-6-8-9,1-3-5-8-9,4,1-6-9,4-6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,5-8-9,5,4,1,4,6,1,3-5-8-9,2,3-5-8-9,3-5,7,3-8-9,7,5,8-9,3-8-9,1,4,6,2,3-8-9,8,1,4,7,3,6,9,5,2,3-5-6-9,7-9,3-5-9,5-8-9,4-5-8-9,2,1,5-6-8,3-4-6-8,2,9,3-5-9,1-5-8-9,4-5-8-9,1-5-8-9,7,5-6-8,3-4-6-8", 41, 123, ["23SV9","2SV4","62SV5","65SV7","16SV4","48SV8","33SV8","43SV3","64SV6"])
,new step("SIMPLE", "3-5-9,4,3-5-8-9,1-3-5-8-9,5-6-8-9,1-3-5-8-9,2,1-6-9,7,3-5-9,4-8-9,7,2,5-6-8-9,1-3-5-8-9,4,1-6-9,4-6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,3-5-8-9,2,3-5-8-9,3,7,3-8-9,7,5,8,3-8-9,1,4,6,2,3-8-9,8,1,4,7,3,6,9,5,2,6,7,3-5-9,5-8-9,4-5-8-9,2,1,5-6-8,3-4-6-8,2,9,3-5-9,1-5-8-9,4-5-8-9,1-5-8-9,7,5-6-8,3-4-6-8", 50, 104, ["71RM12345679","3RM124678","4RM2479","72RM1267","5RM123479","40RM1234678","6RM246789","68RM12379","77RM12379","78RM24678","11RM1234567","80RM1234579","42RM1234678","14RM123479","15RM246789","45RM123467","18RM234578","49RM1245678","54RM12345678"])
,new step("HIDDEN_SINGLE", "3-5-9,4,3-5-9,1-3-5-8,5-6-8,1-3-5,2,1-6-9,7,3-5-9,8-9,7,2,5-6-8,1-3-5,4,1-6-9,6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,5-9,3,7,8-9,7,5,8,3-9,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5-9,5-8-9,4-5-8,2,1,8,3-4-8,2,9,3-5-9,1-5-8-9,4-5-8,1-5-9,7,6-8,3-4-6-8", 50, 79, ["11SV8","45SV8","28SV9","34SV5","49SV3"])
,new step("SIMPLE", "3-5-9,4,3-5-9,1-3-5-8,5-6-8,1-3-5,2,1-6-9,7,3-5-9,8,7,2,5-6-8,1-3-5,4,1-6-9,6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,5-9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5-9,5-8-9,4-5-8,2,1,8,3-4-8,2,9,3-5-9,1-5-8-9,4-5-8,1-5-9,7,6-8,3-4-6-8", 55, 71, ["1RM1246789","4RM23467","72RM12578","81RM12578","10RM1246789","14RM2478"])
,new step("HIDDEN_SINGLE", "3-5,4,3-5-9,1-5-8,5-6-8,1-3-5,2,1-6-9,7,3-5,8,7,2,5-6,1-3-5,4,1-6-9,6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,5-9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5-9,5-8-9,4-5-8,2,1,8,3-4,2,9,3-5-9,1-5-8-9,4-5-8,1-5-9,7,6-8,3-4-6", 55, 65, ["3SV9","74SV9","54SV9"])
,new step("SIMPLE", "3-5,4,9,1-5-8,5-6-8,1-3-5,2,1-6-9,7,3-5,8,7,2,5-6,1-3-5,4,1-6-9,6-9,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,5-9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5-9,5-8-9,4-5-8,2,1,8,3-4,2,9,3-5-9,1-5-8-9,4-5-8,1-5-9,7,6-8,3-4-6", 58, 60, ["18RM125789","66RM1246789","8RM2479","78RM279","75RM1246789","76RM279"])
,new step("HIDDEN_SINGLE", "3-5,4,9,1-5-8,5-6-8,1-3-5,2,1-6,7,3-5,8,7,2,5-6,1-3-5,4,1-6-9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,5-9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,5-8-9,4-5-8,2,1,8,3-4,2,9,3-5,1-5-8,4-5-8,1-5,7,6-8,3-4-6", 58, 54, ["42SV9","17SV9","67SV9"])
,new step("SIMPLE", "3-5,4,9,1-5-8,5-6-8,1-3-5,2,1-6,7,3-5,8,7,2,5-6,1-3-5,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5-9,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1-5-8,4-5-8,1-5,7,6-8,3-4-6", 61, 46, ["40RM12346789"])
,new step("HIDDEN_SINGLE", "3-5,4,9,1-5-8,5-6-8,1-3-5,2,1-6,7,3-5,8,7,2,5-6,1-3-5,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1-5-8,4-5-8,1-5,7,6-8,3-4-6", 61, 45, ["15SV1","40SV5","8SV1"])
,new step("SIMPLE", "3-5,4,9,1-5-8,5-6-8,1-3-5,2,1,7,3-5,8,7,2,5-6,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1-5-8,4-5-8,1-5,7,6-8,3-4-6", 64, 39, ["4RM12345679","6RM1246789","78RM1246789","76RM2345679"])
,new step("HIDDEN_SINGLE", "3-5,4,9,8,5-6-8,3-5,2,1,7,3-5,8,7,2,5-6,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1-8,4-5-8,5,7,6-8,3-4-6", 64, 34, ["6SV3","18SV6","10SV3","76SV1","5SV6","80SV6"])
,new step("SIMPLE", "3-5,4,9,8,6,3,2,1,7,3,8,7,2,5-6,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1,4-5-8,5,7,6,3-4-6", 70, 22, ["1RM12346789","81RM1256789","14RM12346789"])
,new step("HIDDEN_SINGLE", "5,4,9,8,6,3,2,1,7,3,8,7,2,5,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1,4-5-8,5,7,6,3-4", 70, 19, ["1SV5","14SV5","77SV8","4SV8","78SV5","71SV8"])
,new step("SIMPLE", "5,4,9,8,6,3,2,1,7,3,8,7,2,5,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4-5-8,2,1,8,3-4,2,9,3-5,1,8,5,7,6,3-4", 76, 11, ["68RM12356789","75RM1256789"])
,new step("HIDDEN_SINGLE", "5,4,9,8,6,3,2,1,7,3,8,7,2,5,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,3-5,9,4,2,1,8,3-4,2,9,3,1,8,5,7,6,3-4", 76, 8, ["68SV4","81SV4","66SV5"])
,new step("SIMPLE", "5,4,9,8,6,3,2,1,7,3,8,7,2,5,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,5,9,4,2,1,8,3-4,2,9,3,1,8,5,7,6,4", 79, 3, ["72RM12456789"])
,new step("HIDDEN_SINGLE", "5,4,9,8,6,3,2,1,7,3,8,7,2,5,1,4,9,6,1,2,6,4,9,7,8,3,5,9,3,2,6,7,8,5,4,1,4,6,1,5,2,9,3,7,8,7,5,8,3,1,4,6,2,9,8,1,4,7,3,6,9,5,2,6,7,5,9,4,2,1,8,3,2,9,3,1,8,5,7,6,4", 79, 2, ["75SV3","72SV3"])
])
];

function step(strategyName, sudokuBefore, fixedBefore, candidatesBefore, commands) {
  this.strategyName = strategyName;
  this.sudokuBefore = sudokuBefore;
  this.fixedBefore = fixedBefore;
  this.candidatesBefore = candidatesBefore;
  this.commands = commands;
}

function solution(id, quest, result, level, unique, steps) {
  this.id = id;
  this.quest = quest;
  this.result = result;
  this.level = level;
  this.unique = unique;
  this.steps = steps;
}

function command(cmdClass, cellNumber, candidateNumber) {
  this.cmdClass = cmdClass;
  this.cellNumber = cellNumber;
  this.candidateNumber = candidateNumber;
  this.candidateNumbers = null;
  this.execute = function() {
    if (cmdClass == "createCandidate") {
      createCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "removeCandidate") {
      removeCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "setCell") {
      this.candidateNumbers = getCandidateArray(cellNumber);
      promoteCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "unsetCell") {
      removeFixed(cellNumber, candidateNumber);
    } else {
      alert("Unbekannter Befehl: " + cmdClass);
    }
    updateStatisticsAsync();
  }
  this.unexecute = function() {
    if (cmdClass == "createCandidate") {
      removeCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "removeCandidate") {
      createCandidateDo(cellNumber, candidateNumber);
    } else if (cmdClass == "setCell") {
      buildCandidates(getCellId(cellNumber));
      var index = 0;
      for (var i = 1; i <= size; i++) {
        if (i == this.candidateNumbers[index]) {
          index++;
        } else {
          removeCandidateDo(cellNumber, i);
        }
      }
    } else if (cmdClass == "unsetCell") {
      promoteCandidateDo(cellNumber, candidateNumber);
    } else {
      alert("Unbekannter Befehl: " + cmdClass);
    }
    updateStatisticsAsync();
  }
}

function resetCmdHistory() {
  undoCmd = new Array();
  doCmd = new Array();
  ableCmdButtons();
}

function ableCmdButtons() {
  if (undoCmd.length <= 0) {
    document.getElementById("undoButton").disabled=true;
  } else {
    document.getElementById("undoButton").disabled=false;
  }
  if (doCmd.length <= 0) {
    document.getElementById("doButton").disabled=true;
  } else {
    document.getElementById("doButton").disabled=false;
  }
}

function createAndExecuteCmd(cmdClass, cellNumber, candidateNumber) {
  var cmd = new command(cmdClass, cellNumber, candidateNumber);
  cmd.execute();
  this.undoCmd.push(cmd);
  this.doCmd = new Array();
  ableCmdButtons();
}

function doCommand() {
  if (doCmd.length > 0) {
    var cmd = doCmd.pop();
    cmd.execute();
    undoCmd.push(cmd);
    ableCmdButtons();
  } else {
    alert("Es liegen keine Befehle zur Ausführung vor.");
  }
}

function undoCommand() {
  if (undoCmd.length > 0) {
    var cmd = undoCmd.pop();
    cmd.unexecute();
    doCmd.push(cmd);
    ableCmdButtons();
  } else {
    alert("Es liegen keine Rückgängig-Befehle zur Ausführung vor.");
  }
}

function updateStatisticsAsync() {
  if (updateStatisticsId != null) {
    clearTimeout(updateStatisticsId);
  }
  updateStatisticsId = setTimeout(updateStatistics, 100);
}

function updateStatistics() {
  var fixedCellNumber = 0;
  var candidateNumber = 0;
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      fixedCellNumber++;
    } else {
      for (var k = 1; k <= size; k++) {
        var candidate = getCandidate(i, k);
        if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
          candidateNumber++;
        }
      }
    }
    checkConflict(i);
  }
  document.getElementById("fixedCellNumber").value = fixedCellNumber;
  document.getElementById("candidateNumber").value = candidateNumber;
  var board = document.getElementById("board");
  if (candidateNumber == 0 && fixedCellNumber == size * size) {
    if (isSolved()) {
      board.className = addStyle(board.className, "solved");
    }
  } else {
      board.className = removeStyle(board.className, "solved");
  }
}

function switchVisibility(switchId) {
  var configSwitch = document.getElementById(switchId);
  var configSwitchBlock = document.getElementById(configSwitch.id + "Block");
  var content = configSwitch.firstChild.data;
  if (configSwitch.firstChild.data.match(/^\+$/)) {
    configSwitch.replaceChild(document.createTextNode("-"), configSwitch.firstChild);
    configSwitchBlock.style.visibility = "visible";
    configSwitchBlock.style.display = "block";
  } else {
    configSwitch.replaceChild(document.createTextNode("+"), configSwitch.firstChild);
    configSwitchBlock.style.visibility = "hidden";
    configSwitchBlock.style.display = "none";
  }
}

function addStyle(style, newStyle) {
  var erg = style.indexOf(newStyle);
  if (erg >= 0) {
    return style;
  } else {
    return style + " " + newStyle;
  }
}

function removeStyle(style, oldStyle) {
  var erg = style.indexOf(" " + oldStyle);
  if (erg >= 0) {
    return style.substr(0, erg);
  } else {
    return style;
  }
}

function getCell(cellId) {
  return document.getElementById(cellId);
}

function getCellId(cellNumber) {
  return "cell" + cellNumber;
}

function getCandidate(cellNumber, c) {
  return document.getElementById(getCandidateId(getCellId(cellNumber), c));
}

function getCandidateId(cellId, c) {
  return cellId + "candidate" + c;
}

function getColumnNumber(cellNumber) {
  column = cellNumber % size;
  if (column == 0) {
    return size;
  }
  return column;
}

function getBlockNumber(cellNumber) {
  row = getRowNumber(cellNumber);
  column = getColumnNumber(cellNumber);
  return Math.floor((row - 1)/ subSize) * subSize + Math.floor((column - 1)/ subSize) + 1;
}

function getFixedValue(cellNumber) {
  if (isCellFixed(cellNumber)) {
    return getValue(getCell(getCellId(cellNumber)));
  }
  return null;
}

function getRowNumber(cellNumber) {
  return Math.floor((cellNumber - 1)/ size) + 1;
}

function getValue(node) {
  return parseInt(node.firstChild.data);
}

function isCellFixed(cellNumber) {
  if (getCell(getCellId(cellNumber)).firstChild.nodeType == 3) {
    return true;
  }
  return false;
}

function buildBoard() {
  var boardTable = document.createElement("table");
  boardTable.id = "board";
  boardTable.border = "0";
  boardTable.cellPadding = "0";
  boardTable.cellSpacing = "0";
  document.getElementById("sudoku").appendChild(boardTable);
  var row = null;
  for (var i = 1; i <= size * size; i++) {
    if (i % size == 1) {
      var row = document.createElement("tr");
      row.id = "row" + (Math.floor(i / size) + 1);
      boardTable.appendChild(row);
    }
    var cell = document.createElement("td");
    cell.id = getCellId(i);
    cell.className = "fixed block" + getBlockNumber(i);
    row.appendChild(cell);
    var cellText = document.createTextNode(i);
    cell.appendChild(cellText);
  }
}

function buildCandidates(cellId) {
  cell = getCell(cellId);
  cell.className = removeStyle(cell.className, "original")
  cell.className = removeStyle(cell.className, "conflict")
  cell.className = removeStyle(cell.className, "highlight3")
  cell.onmouseover = null;
  cell.onmouseout = null;
  cell.onclick = null;
  cell.ondblclick = null;
  candidatesTable = document.createElement("table");
  candidatesTable.id = cellId + "candidate";
  candidatesTable.border = "0"
  candidatesTable.cellPadding = "0";
  candidatesTable.cellSpacing = "0";
  var candidatesRow = null;
  for (var i = 1; i <= size; i++) {
    if (i % subSize == 1) {
      candidatesRow = document.createElement("tr");
      candidatesRow.id = cellId + "row" + (Math.floor(i / subSize) + 1);
      candidatesTable.appendChild(candidatesRow);
    }
    candidatesCell = document.createElement("td");
    candidatesCell.id = getCandidateId(cellId, i);
    candidatesCell.className = "candidate";
    if (document.getElementById("candidateButton" + i).className.match(/candidateButtonOn/g)) {
      candidatesCell.className = addStyle(candidatesCell.className, "highlight1");
    }
    candidatesCell.onmouseover = enterCandidate;
    candidatesCell.onmouseout = exitCandidate;
    candidatesCell.onclick = removeCandidate;
    candidatesCell.ondblclick = promoteCandidate;
    candidatesRow.appendChild(candidatesCell);
    cellText = document.createTextNode(i);
    candidatesCell.appendChild(cellText);
  }
  cell.replaceChild(candidatesTable, cell.firstChild);
}

function buildFixed(cellNumber, value) {
  cell = getCell(getCellId(cellNumber));
  cell.className = removeStyle(cell.className, "conflict")
  cell.onmouseover = enterFixed;
  cell.onmouseout = exitFixed;
  if (isInOriginal(cellNumber)) {
    cell.className = addStyle(cell.className, "original");
  } else {
    cell.className = removeStyle(cell.className, "original");
  }
  var cellText = document.createTextNode(value);
  cell.replaceChild(cellText, cell.firstChild);
}

function loadSudoku() {
  if (document.getElementById("sudokuAsString").value.match(/^[0-9\.]{81}$/)) {
    original = document.getElementById("sudokuAsString").value;
    for (var i = 1; i <= size * size; i++) {
      value = original.substr(i - 1, 1);
      if (value == ".") {
        buildCandidates(getCellId(i));
      } else {
        buildFixed(i, value);
      }
    }
  } else {
    if (!parseSudokuString(document.getElementById("sudokuAsString").value)) {
      alert("Sudoku ist ungültig!");
    }
  }
  resetCmdHistory();
  updateStatisticsAsync();
}

function removeAllCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      // Nix machen!
    } else {
      // Fixed aus Zeile, Spalte und Block sammeln
      removeCandidates(i);
    }
  }
}

function collectFixed(cellNumber) {
  var fixed = new Array();
  for (var i = 1; i <= size; i++) {
    fixed[i] = false;
  }
  for (var i = 1; i <= size * size; i++) {
    if (i != cellNumber) {
      if (getRowNumber(i) == getRowNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
      if (getColumnNumber(i) == getColumnNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
      if (getBlockNumber(i) == getBlockNumber(cellNumber)) {
        if (isCellFixed(i)) {
          fixed[getFixedValue(i)] = true;
        }
      }
    }
  }
  return fixed;
}

function removeCandidates(cellNumber) {
  var fixed = collectFixed(cellNumber);
  for (var i = 1; i <= size; i++) {
    if (fixed[i]) {
      var candidate = getCandidate(cellNumber, i);
      if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
        createAndExecuteCmd("removeCandidate", cellNumber, i);
      }
    }
  }
}

function conflictsCandidate(cellNumber, c) {
  return collectFixed(cellNumber)[c];
}

function highlightFixedOn(value) {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      var cell = getCell(getCellId(i));
      if (value == getValue(cell)) {
        cell.className = addStyle(cell.className, "highlight3");
      }
    }
  }
}

function highlightFixedOff(value) {
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      var cell = getCell(getCellId(i));
      if (value == getValue(cell)) {
        cell.className = removeStyle(cell.className, "highlight3");
      }
    }
  }
}

function enterFixed() {
  var value = getValue(this);
  if (document.getElementById("highlightFixed").checked) {
    this.className = addStyle(this.className, "highlight3");
  }
  if (document.getElementById("highlightAllFixed").checked) {
    highlightFixedOn(value);
  }
  if (document.getElementById("highlightAllFixedAndCandidates").checked) {
    highlightCandidateOn(value, "highlight2");
  }
}

function exitFixed() {
  var value = getValue(this);
  this.className = removeStyle(this.className, "highlight3");
  highlightFixedOff(value);
  highlightCandidateOff(value, "highlight2");
}

function enterCandidate() {
  var value = getValue(this);
  if (document.getElementById("highlightCandidates").checked) {
    this.className = addStyle(this.className, "highlight2");
  }
  if (document.getElementById("highlightAllCandidates").checked) {
    highlightCandidateOn(value, "highlight2");
  }
  if (document.getElementById("highlightAllCandidatesAndFixed").checked) {
    highlightFixedOn(value);
  }
}

function exitCandidate() {
  var value = getValue(this);
  this.className = removeStyle(this.className, "highlight2");
  highlightCandidateOff(value, "highlight2");
  highlightFixedOff(value);
}

function removeCandidateDo(cellNumber, candidateNumber) {
  var candidate = getCandidate(cellNumber, candidateNumber);
  if (candidate.firstChild == null || candidate.firstChild.data.length <= 0) {
    return;
  }
  candidate.className = removeStyle(candidate.className, "highlight1");
  candidate.className = removeStyle(candidate.className, "highlight2");
  candidate.onmouseover = null;
  candidate.onmouseout = null;
  //candidate.onclick = null;
  //candidate.ondblclick = null;
  candidate.removeChild(candidate.firstChild);
}

function createCandidateDo(cellNumber, candidateNumber) {
  var candidate = getCandidate(cellNumber, candidateNumber);
  candidate.className = "candidate";
  candidate.onmouseover = enterCandidate;
  candidate.onmouseout = exitCandidate;
  //candidate.onclick = removeCandidate;
  //candidate.ondblclick = promoteCandidate;
  if (isCandidateButtonOn(candidateNumber)) {
    candidate.className = addStyle(candidate.className, "highlight1");
  }
  candidateText = document.createTextNode(candidateNumber);
  candidate.appendChild(candidateText);
}

function createOrRemoveCandidateDo(candidateId) {
  var candidate = document.getElementById(candidateId);
  candidateId.match(/cell(\d+)candidate(\d+)/g);
  if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
    createAndExecuteCmd("removeCandidate", parseInt(RegExp.$1), parseInt(RegExp.$2));
  } else {
    createAndExecuteCmd("createCandidate", parseInt(RegExp.$1), parseInt(RegExp.$2));
  }
}

function promoteCandidateDo(cellNumber, candidateNumber) {
  buildFixed(cellNumber, candidateNumber);
  var cellId = getCellId(cellNumber)
  var cell = document.getElementById(cellId);
  if (conflictsCandidate(cellNumber, candidateNumber)) {
    cell.className = addStyle(cell.className, "conflict");
  }
  cell.replaceChild(document.createTextNode(candidateNumber), cell.firstChild);
  cell.onclick = resetFixed;
  checkAllConflicts(cellNumber);
}

var dblclick = false;

function removeCandidate() {
  var candidateId = this.id;
  setTimeout(function() {
    if (dblclick == true) {
      return;
    }
    createOrRemoveCandidateDo(candidateId);
  }, 250);
}

function promoteCandidate() {
  var candidateId = this.id;
  dblclick = true;
  candidateId.match(/cell(\d+)candidate(\d+)/g);
  createAndExecuteCmd("setCell", parseInt(RegExp.$1), parseInt(RegExp.$2));
  setTimeout(function() {
    dblclick = false;
  }, 250);
}

function buildCandidateButtons() {
  var candidateButtons = document.getElementById("candidateButtons");
  for (var i = 1; i <= size; i++) {
    var candidateButton = document.createElement("div");
    candidateButton.id = "candidateButton" + i;
    candidateButton.className = "candidateButtonOff";
    candidateButton.onclick = highlightCandidates;
    candidateButtons.appendChild(candidateButton);
    candidateButton.appendChild(document.createTextNode(i));
  }
}

function highlightCandidateOn(candidate, cssClassName) {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        var candidateNode = getCandidate(i, k);
        if (candidateNode.childNodes.length > 0 && candidateNode.firstChild.data.length > 0) {
          if (k == candidate) {
            candidateNode.className = addStyle(candidateNode.className, cssClassName);
          }
        }
      }
    }
  }
}

function highlightCandidateOff(candidate, cssClassName) {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        var candidateNode = getCandidate(i, k);
        if (candidateNode.childNodes.length > 0 && candidateNode.firstChild.data.length > 0) {
          if (k == candidate) {
            candidateNode.className = removeStyle(candidateNode.className, cssClassName);
          }
        }
      }
    }
  }
}

function highlightCandidates() {
  var candidate = parseInt(this.id.match(/\d+/g)[0]);
  if (this.className == "candidateButtonOff") {
    this.className = "candidateButtonOn";
    highlightCandidateOn(candidate, "highlight1");
  } else {
    this.className = "candidateButtonOff";
    highlightCandidateOff(candidate, "highlight1");
  }
}

function isCandidateButtonOn(value) {
  for (var i = 1; i <= size; i++) {
    var candidateButton = document.getElementById("candidateButton" + i);
    if (candidateButton.className.match(/candidateButtonOn/g)) {
      return true;
    }
  }
  return false;
}

function removeFixed(cellNumber, candidateNumber) {
  highlightFixedOff(candidateNumber);
  highlightCandidateOff(candidateNumber, "highlight2");
  if (isInOriginal(cellNumber)) {
    // Nix machen
  } else {
    // Reset
    buildCandidates(getCellId(cellNumber));
    checkAllConflicts(cellNumber);
  }
  if (!isSolved()) {
    var board = document.getElementById("board");
    board.className = removeStyle(board.className, "solved");
  }
}

function resetFixed() {
  var cellNumber = parseInt(this.id.match(/\d+/g)[0]);
  var value = getValue(this);
  createAndExecuteCmd("unsetCell", cellNumber, value);
}

function isInOriginal(cellNumber) {
  var originalChar = original.substr(cellNumber - 1, 1);
  if (originalChar.match(/\d+/)) {
    return true;
  }
  return false;
}

function resetAllCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      buildCandidates(getCellId(i));
    }
  }
}

function emptyCandidates() {
  for (var i = 1; i <= size * size; i++) {
    if (!isCellFixed(i)) {
      for (var k = 1; k <= size; k++) {
        removeCandidateDo(getCandidateId(getCellId(i), k));
      }
    }
  }
}

function getSudokuById(id) {
  for (var i = 0; i < sudokus.length; i++) {
    if (sudokus[i].id == id) {
      sudoku = sudokus[i];
    }
  }
  return sudoku;
}

function removeSteps() {
  var stepsNode = document.getElementById("steps");
  for (var i = stepsNode.childNodes.length; i > 0; i--) {
    var lastChildNode = stepsNode.childNodes[i-1];
    stepsNode.removeChild(lastChildNode);
  }
}

function buildStep(stepNr, step) {
  var stepsNode = document.getElementById("steps");
  var stepNode = document.createElement("p");
  var stepText = document.createTextNode(" " + step.strategyName + " Vorher: " + step.fixedBefore + " / " + step.candidatesBefore);
  var stepBreak = document.createElement("br");
  var stepCmds = document.createTextNode(step.commands.join(", "));
  stepNode.appendChild(stepText);
  stepNode.appendChild(stepBreak);
  stepNode.appendChild(stepCmds);
  stepsNode.appendChild(stepNode);
}

function buildSolution() {
  removeSteps();
  for (var i = 0; i < sudoku.steps.length; i++) {
    buildStep(i, sudoku.steps[i]);
  }
}

function copyAndLoadSudoku() {
  getSudokuById(document.getElementById("quests").value);
  document.getElementById("sudokuAsString").value = sudoku.quest;
  loadSudoku();
  buildSolution();
}

function checkAllConflicts(cellNumber) {
  for (var i = 1; i <= size * size; i++) {
    if (getRowNumber(i) == getRowNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
    if (getColumnNumber(i) == getColumnNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
    if (getBlockNumber(i) == getBlockNumber(cellNumber)) {
      if (isCellFixed(i)) {
        checkConflict(i);
      }
    }
  }
}

function checkConflict(cellNumber) {
  var cellId = getCellId(cellNumber);
  var cell = document.getElementById(cellId);
  if (isCellFixed(cellNumber)) {
    if (conflictsCandidate(cellNumber, getFixedValue(cellNumber))) {
      cell.className = addStyle(cell.className, "conflict");
    } else {
      cell.className = removeStyle(cell.className, "conflict");
    }
  }
}

function hideCandidates() {
  var hideButton = document.getElementById("hideButton");
  if (hideButton.value == "Ausblenden") {
    //var stylesheets = document.styleSheets;
    for (var i = 1; i <= size * size; i++) {
      if (!isCellFixed(i)) {
        for (var k = 1; k <= size; k++) {
          var candidate = getCandidate(i, k);
          candidate.className = addStyle(candidate.className, "hide");
        }
      }
    }
    hideButton.value = "Einblenden";
  } else {
    for (var i = 1; i <= size * size; i++) {
      if (!isCellFixed(i)) {
        for (var k = 1; k <= size; k++) {
          var candidate = getCandidate(i, k);
          candidate.className = removeStyle(candidate.className, "hide");
        }
      }
    }
    hideButton.value = "Ausblenden";
  }
}

function saveSudoku() {
  var sudokuAsString = buildSudokuString(false);
  document.getElementById("sudokuAsString").value = sudokuAsString;
}

function isSolved() {
  var sum = (size * (size + 1)) / 2;
  var rowSum = new Array();
  var columnSum = new Array();
  var blockSum = new Array();
  for (var i = 1; i <= size; i++) {
    rowSum[i] = 0;
    columnSum[i] = 0;
    blockSum[i] = 0;
  }
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      rowSum[getRowNumber(i)] = rowSum[getRowNumber(i)] + getFixedValue(i);
      columnSum[getColumnNumber(i)] = columnSum[getColumnNumber(i)] + getFixedValue(i);
      blockSum[getBlockNumber(i)] = blockSum[getBlockNumber(i)] + getFixedValue(i);
    }
  }
  for (var i = 1; i <= size; i++) {
    if (rowSum[i] != sum) {
      return false;
    }
    if (columnSum[i] != sum) {
      return false;
    }
    if (blockSum[i] != sum) {
      return false;
    }
  }
  return true;
}

function eraseCookie() {
  var name = "SudokuAsString";
  var domain = null; //"jdufner.de";
  var expires = new Date((new Date()).getTime() - 1000*3600*24).toGMTString();
  var path = null;
  //var secure = null;
  var cook = name + "=";
  cook += (domain) ? "; domain=" + domain : "";
  cook += (expires) ? "; expires=" + expires : "";
  cook += (path) ? "; path=" + path : "";
  //cook += (secure) ? "; secure" : "";
  document.cookie = cook;
}

function setCookie(wert) {
  var name = "SudokuAsString";
  var domain = null; //"jdufner.de";
  var expires = new Date((new Date()).getTime() + 1000*3600*24*7).toGMTString();
  var path = null;
  //var secure = null;
  var cook = name + "=" + unescape(wert);
  cook += (domain) ? "; domain=" + domain : "";
  cook += (expires) ? "; expires=" + expires : "";
  cook += (path) ? "; path=" + path : "";
  //cook += (secure) ? "; secure" : "";
  document.cookie = cook;
}

function getCookie() {
  var name = "SudokuAsString";
  var i = 0;  //Suchposition im Cookie
  var suche = name + "=";
  while (i < document.cookie.length) {
    if (document.cookie.substring(i, i + suche.length) == suche) {
      var ende = document.cookie.indexOf(";", i + suche.length);
      if (ende <= -1) {
        ende = document.cookie.length;
      }
      var cook = document.cookie.substring(i + suche.length, ende);
      return unescape(cook);
    }
    i++;
  }
  return "";
}

function getCandidateArray(cellNumber) {
  var candidates = new Array();
  for (var i = 1; i <= size; i++) {
    var candidate = getCandidate(cellNumber, i);
    if (candidate.firstChild != null && candidate.firstChild.nodeType == 3) {
      candidates.push(i);
    }
  }
  return candidates;
}

function buildCandidateString(cellNumber) {
  return getCandidateArray(cellNumber).join("-");
}

function buildSudokuString(forceIncloseCandidates) {
  var sudoku = new Array();
  var incloseCandidates = document.getElementById("incloseCandidates").checked;
  for (var i = 1; i <= size * size; i++) {
    if (isCellFixed(i)) {
      sudoku[i-1] = getFixedValue(i);
    } else {
      if (forceIncloseCandidates || incloseCandidates) {
        sudoku[i-1] = buildCandidateString(i);
      } else {
        sudoku[i-1] = ".";
      }
    }
  }
  if (forceIncloseCandidates || incloseCandidates) {
    return sudoku.join(",");
  } else {
    return sudoku.join("");
  }
}

function saveSudokuInCookie() {
  var sudokuString = buildSudokuString(true);
  if (sudokuString.length > 4000) {
    alert("Sudoku kann nicht gespeichert werden");
  }
  setCookie(sudokuString);
}

function parseSudokuString(sudokuString) {
  var sudoku = sudokuString.split(",");
  original = "";
  for (var i = 1; i <= size * size; i++) {
    if (sudoku[i-1].match(/^(\d+)$/)) {
      // fixed
      original += parseInt(RegExp.$1);
    } else {
      // candidates
      original += ".";
    }
  }
  for (var i = 1; i <= size * size; i++) {
    if (sudoku[i-1].match(/^(\d+)$/)) {
      // fixed
      buildFixed(i, parseInt(RegExp.$1));
    } else {
      // candidates
      if (sudoku[i-1].match(/^([0-9\-]+)$/)) {
        var candidates = sudoku[i-1].split("-");
        var cellId = getCellId(i);
        buildCandidates(cellId);
        var candidate = parseInt(candidates.shift());
        for (var k = 1; k <= size; k++) {
          if (k != candidate) {
            removeCandidateDo(i, k);
          } else {
            candidate = parseInt(candidates.shift());
          }
        }
      } else {
        return false;
      }
    }
  }
  return true;
}

function loadSudokuFromCookie() {
  var sudokuString = getCookie();
  parseSudokuString(sudokuString);
  resetCmdHistory();
  updateStatisticsAsync();
}

function buildQuests() {
  var questsNode = document.getElementById("quests");
  for (var i = 0; i < this.sudokus.length; i++) {
    var optionNode = document.createElement("option");
    var valueAttribute = document.createAttribute("value");
    //valueAttribute.nodeValue = sudokus[i].quest;
    valueAttribute.nodeValue = sudokus[i].id;
    optionNode.setAttributeNode(valueAttribute);
    var textNode = document.createTextNode(sudokus[i].id + " " + sudokus[i].level);
    optionNode.appendChild(textNode);
    questsNode.appendChild(optionNode);
  }
}

function main() {
  buildBoard();
  buildCandidateButtons();
  buildQuests();
}

main();

-->
  </script>
</html>
